/**
* SignWriting 2010 JavaScript Library v1.5.2
* https://github.com/Slevinski/sw10js
* Copyright (c) 2007-2015, Stephen E Slevinski Jr
* sw10.min.js is released under the MIT License.
*/
var sw10=signwriting_2010={key:function(e){var t=e.match(/S[123][0-9a-f]{2}[0-5][0-9a-f]([0-9]{3}x[0-9]{3})?/g);return t?t[0]:""},fsw:function(e){var t=e.match(/(A(S[123][0-9a-f]{2}[0-5][0-9a-f])+)?[BLMR]([0-9]{3}x[0-9]{3})(S[123][0-9a-f]{2}[0-5][0-9a-f][0-9]{3}x[0-9]{3})*|S38[7-9ab][0-5][0-9a-f][0-9]{3}x[0-9]{3}/);return t?t[0]:""},mirror:function(e){if(e=this.key(e),!this.size(e))return"";var t,a=e.slice(0,4),r=e.slice(4,5),i=parseInt(e.slice(5,6),16),s=a+"08",n=a+"18";for(this.size(s)||this.size(n)?t=8:((0==i||4==i)&&(t=0),(1==i||5==i)&&(t=6),(2==i||6==i)&&(t=4),(3==i||7==i)&&(t=2)),e="";!this.size(e);)i+=t,i>7&&8>t&&(i-=8),i>15&&(i-=16),e=a+r+i.toString(16);return e},fill:function(e,t){if(e=this.key(e),!this.size(e))return"";-1!=t&&(t=1);var a=e.slice(0,4),r=parseInt(e.slice(4,5)),i=e.slice(5,6);for(e="";!this.size(e);)r+=t,r>5&&(r=0),0>r&&(r=5),e=a+r+i;return e},rotate:function(e,t){if(e=this.key(e),!this.size(e))return"";-1!=t&&(t=1);var a=e.slice(0,4),r=e.slice(4,5),i=parseInt(e.slice(5,6),16);for(e="";!this.size(e);)i>7?(i+=t,i>15&&(i=8),8>i&&(i=15),e=a+r+i.toString(16)):(i-=t,i>7&&(i=0),0>i&&(i=7),e=a+r+i);return e},scroll:function(e,t){if(e=this.key(e),!this.size(e))return"";-1!=t&&(t=1);var a=parseInt(e.slice(1,4),16)+t,r=e.slice(4,5),i=e.slice(5,6),s="S"+a.toString(16)+r+i;return this.size(s)?s:e},structure:function(e,t,a){var r={kind:["S100","S37f","S387"],category:["S100","S205","S2f7","S2ff","S36d","S37f","S387"],group:["S100","S10e","S11e","S144","S14c","S186","S1a4","S1ba","S1cd","S1f5","S205","S216","S22a","S255","S265","S288","S2a6","S2b7","S2d5","S2e3","S2f7","S2ff","S30a","S32a","S33b","S359","S36d","S376","S37f","S387"]},s=r[e];if(!s)return t?"is"==a?!1:"":[];if(!t)return s;a||(a="");var n;switch(a){case"is":return-1==s.indexOf(t.slice(0,4))?!1:!0;case"first":return s[0];case"last":return s.slice(-1)[0];case"prev":n=-2;break;case"":n=-1;break;case"next":n=0;break;default:return""}var f=s.length;for(i=0;i<s.length;i++)if(parseInt(t.slice(1,4),16)<parseInt(s[i].slice(1,4),16)){f=i;break}return f+=n,f=0>f?0:f>=s.length?s.length-1:f,s[f]},type:function(e){var t,a;switch(e){case"writing":t="100",a="37e";break;case"hand":t="100",a="204";break;case"movement":t="205",a="2f6";break;case"dynamic":t="2f7",a="2fe";break;case"head":case"hcenter":t="2ff",a="36c";break;case"vcenter":t="2ff",a="375";break;case"trunk":t="36d",a="375";break;case"limb":t="376",a="37e";break;case"location":t="37f",a="386";break;case"punctuation":t="387",a="38b";break;default:t="100",a="38b"}return[t,a]},is:function(e,t){if(6==e.length&&!this.size(e))return!1;var a=this.type(t),r=a[0],i=a[1],s=e.slice(1,4);return parseInt(r,16)<=parseInt(s,16)&&parseInt(i,16)>=parseInt(s,16)},filter:function(e,t){var a=this.type(t),r=a[0],i=a[1],s="S"+this.range(r,i,1)+"[0-5][0-9a-f][0-9]{3}x[0-9]{3}",n=e.match(RegExp(s,"g"));return n?n.join(""):""},random:function(e){var t=this.type(e),a=t[0],r=t[1],i=Math.floor(Math.random()*(parseInt(r,16)-parseInt(a,16)+1)+parseInt(a,16)),s=Math.floor(6*Math.random()),n=Math.floor(16*Math.random()),f="S"+i.toString(16)+s.toString(16)+n.toString(16);return this.size(f)?f:this.random(e)},view:function(e,t){if(!this.is(e))return"";var a=e.slice(0,4);return t?a+(this.size(a+"00")?"0":"1")+"0":a+(this.is(a,"hand")&&!this.structure("group",a,"is")?"1":"0")+"0"},code:function(e,t){var a,r=this.fsw(e);if(r){var s="S[123][0-9a-f]{2}[0-5][0-9a-f]",n=r.match(RegExp(s,"g"));for(i=0;i<n.length;i++)a=n[i],r=r.replace(a,this.code(a,t));return r}if(a=this.key(e),!a)return"";var f=1048576+96*(parseInt(a.slice(1,4),16)-256)+16*parseInt(a.slice(4,5),16)+parseInt(a.slice(5,6),16)+1;return t?f.toString(16).toUpperCase():String.fromCharCode(55296+(f-65536>>10),56320+(f-65536&1023))},uni8:function(e,t){var a,r=this.fsw(e);if(r){var s="S[123][0-9a-f]{2}[0-5][0-9a-f]",n=r.match(RegExp(s,"g"));for(i=0;i<n.length;i++)a=n[i],r=r.replace(a,this.uni8(a,t));return r}if(a=this.key(e),!a)return"";var f=parseInt(a.substr(1,3),16)+parseInt("1D700",16),c=t?f.toString(16).toUpperCase():String.fromCharCode(55296+(f-65536>>10),56320+(f-65536&1023)),l=a.substr(4,1);"0"!=l&&(l=parseInt(l,16)+parseInt("1DA9A",16),c+=t?l.toString(16).toUpperCase():String.fromCharCode(55296+(l-65536>>10),56320+(l-65536&1023)));var h=a.substr(5,1);return"0"!=h&&(h=parseInt(h,16)+parseInt("1DAA0",16),c+=t?h.toString(16).toUpperCase():String.fromCharCode(55296+(h-65536>>10),56320+(h-65536&1023))),c},pua:function(e){var t=this.fsw(e);if(t){for(var a,r,i,s,n,f="[0-9]{3}x[0-9]{3}",c=t.match(RegExp(f,"g")),l=0;l<c.length;l++)a=c[l],i=a.split("x"),i[0]=parseInt(i[0])+parseInt("FDD0C",16),i[1]=parseInt(i[1])+parseInt("FDD0C",16),n=String.fromCharCode(55296+(i[0]-65536>>10),56320+(i[0]-65536&1023)),n+=String.fromCharCode(55296+(i[1]-65536>>10),56320+(i[1]-65536&1023)),t=t.replace(a,n);for(f="S[123][0-9a-f]{2}[0-5][0-9a-f]",c=t.match(RegExp(f,"g")),l=0;l<c.length;l++)s=c[l],t=t.replace(s,this.pua(s));return r=parseInt("FD800",16),t=t.replace("A",String.fromCharCode(55296+(r-65536>>10),56320+(r-65536&1023))),t=t.replace("B",String.fromCharCode(55296+(r+1-65536>>10),56320+(r+1-65536&1023))),t=t.replace("L",String.fromCharCode(55296+(r+2-65536>>10),56320+(r+2-65536&1023))),t=t.replace("M",String.fromCharCode(55296+(r+3-65536>>10),56320+(r+3-65536&1023))),t=t.replace("R",String.fromCharCode(55296+(r+4-65536>>10),56320+(r+4-65536&1023)))}var s=this.key(e);if(!s)return"";var h=parseInt(s.substr(1,3),16)+parseInt("FD730",16),n=String.fromCharCode(55296+(h-65536>>10),56320+(h-65536&1023)),p=s.substr(4,1);p=parseInt(p,16)+parseInt("FD810",16),n+=String.fromCharCode(55296+(p-65536>>10),56320+(p-65536&1023));var o=s.substr(5,1);return o=parseInt(o,16)+parseInt("FD820",16),n+=String.fromCharCode(55296+(o-65536>>10),56320+(o-65536&1023))},bbox:function(e){var t,a,r,i,s,n,f=/[0-9]{3}x[0-9]{3}/g,c=e.match(f);if(c){for(var l=0;l<c.length;l++)t=parseInt(c[l].slice(0,3)),a=parseInt(c[l].slice(4,7)),0==l?(r=t,i=t,s=a,n=a):(r=Math.min(r,t),i=Math.max(i,t),s=Math.min(s,a),n=Math.max(n,a));return""+r+" "+i+" "+s+" "+n}return""},displace:function(e,t,a){var r,i,s="[0-9]{3}x[0-9]{3}",n=e.match(RegExp(s,"g"));if(n){for(var f=0;f<n.length;f++)r=parseInt(n[f].slice(0,3))+t,i=parseInt(n[f].slice(4,7))+a,e=e.replace(n[f],r+"X"+i);e=e.replace(/X/g,"x")}return e},sizes:{},size:function(e){var t,a=this.fsw(e);if(a){var r=this.bbox(a);return r=r.split(" "),x1=r[0],x2=r[1],y1=r[2],y2=r[3],t=x2-x1+"x"+(y2-y1),"0x0"==t?"":t}var i=this.key(e);if(!i)return"";if(this.sizes[i])return this.sizes[i];var s,n,f=2,c=76*f;this.canvaser||(this.canvaser=document.createElement("canvas"),this.canvaser.width=c,this.canvaser.height=c);var l=this.canvaser,h=l.getContext("2d");h.clearRect(0,0,c,c),h.font=30*f+"px 'SignWriting 2010'",h.fillText(this.code(i),0,0),s=h.getImageData(0,0,c,c).data;e:for(var p=c-1;p>=0;p--)for(var o=0;c>o;o++)for(var u=0;4>u;u++)if(n=4*p+4*o*c+u,s[n])break e;var g=p;e:for(var o=c-1;o>=0;o--)for(var p=0;g>p;p++)for(var u=0;4>u;u++)if(n=4*p+4*o*c+u,s[n])break e;var S=o+1;if(g=""+Math.ceil(g/f),S=""+Math.ceil(S/f),"S1710d S1711d S1712d S17311 S17321 S17733 S1773f S17743 S1774f S17753 S1775f S16d33 S1713d S1714d S17301 S17329 S1715d".indexOf(i)>-1&&(g="20"),"S24c15 S24c30".indexOf(i)>-1&&(g="22"),"S2903b".indexOf(i)>-1&&(g="23"),"S1d203 S1d233".indexOf(i)>-1&&(g="25"),"S24c15".indexOf(i)>-1&&(g="28"),"S2e629".indexOf(i)>-1&&(g="29"),"S16541 S23425".indexOf(i)>-1&&(g="30"),"S2d316".indexOf(i)>-1&&(g="40"),"S2541a".indexOf(i)>-1&&(g="50"),"S1732f S17731 S17741 S17751".indexOf(i)>-1&&(S="20"),"S1412c".indexOf(i)>-1&&(S="21"),"S2a903".indexOf(i)>-1&&(S="31"),"S2b002".indexOf(i)>-1&&(S="36"),t=g+"x"+S,"0x0"==t){var x="S1000815x30 S1000921x30 S1000a30x15 S1000b30x21 S1000c15x30 S1000d21x30 ",d=x.indexOf(i);if(-1==d)return"";var v=x.indexOf(" ",d);t=x.slice(d+6,v)}return this.sizes[i]=t,t},max:function(e,t){var a=this.type(t),r=a[0],i=a[1],s="S"+this.range(r,i,1)+"[0-5][0-9a-f][0-9]{3}x[0-9]{3}",n=e.match(RegExp(s,"g"));if(n){for(var f,c,l,h,p="",o=0;o<n.length;o++)f=n[o].slice(0,6),c=parseInt(n[o].slice(6,9)),l=parseInt(n[o].slice(10,13)),h=this.size(f).split("x"),p+=f+c+"x"+l+(c+parseInt(h[0]))+"x"+(l+parseInt(h[1]));return p}return""},norm:function(e){var t,a,r,i,s=this.bbox(this.max(e,"hcenter")),n=this.bbox(this.max(e,"vcenter")),f=this.bbox(this.max(e));if(!f)return"";n?(t=parseInt(n.slice(0,3)),a=parseInt(n.slice(4,7))):(t=parseInt(f.slice(0,3)),a=parseInt(f.slice(4,7))),s?(r=parseInt(s.slice(8,11)),i=parseInt(s.slice(12,15))):(r=parseInt(f.slice(8,11)),i=parseInt(f.slice(12,15)));var c=parseInt((t+a)/2),l=parseInt((r+i)/2),h=500-c,p=500-l,o=e.match(/(A(S[123][0-9a-f]{2}[0-5][0-9a-f])+)?[BLMR]/);return o=o?o[0]:"M",e=o+parseInt(f.slice(4,7))+"x"+parseInt(f.slice(12,15))+this.filter(e),this.displace(e,h,p)},svg:function(e,t){var a,r=this.fsw(e);if(!r){var i=this.key(e),a=this.size(i);if(!a)return"";r=6==i.length?i+"500x500":i}t||(t={}),t.size=t.size?parseFloat(t.size)||"x":1,t.line=t.line?/^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(t.line)?"#"+t.line:t.line:"black",t.fill=t.fill?/^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(t.fill)?"#"+t.fill:t.fill:"white",t.view="key"==t.view?"key":"uni8"==t.view?"uni8":"pua"==t.view?"pua":"code",t.copy="code"==t.copy?"code":"uni8"==t.copy?"uni8":"pua"==t.copy?"pua":"key";var s,n,f,c,l,h,p;s=/(A(S[123][0-9a-f]{2}[0-5][0-9a-f])+)?[BLMR]([0-9]{3}x[0-9]{3})(S[123][0-9a-f]{2}[0-5][0-9a-f][0-9]{3}x[0-9]{3})*|S38[7-9ab][0-5][0-9a-f][0-9]{3}x[0-9]{3}/g,n=/S[123][0-9a-f]{2}[0-5][0-9a-f][0-9]{3}x[0-9]{3}/g,f=/[0-9]{3}x[0-9]{3}/g,p={},p.L=-1,p.R=1;var o,u,g,S,x,d,v=500,b=500,I=500,k=500;g=r.charAt(0);var m=this.bbox(r);m=m.split(" "),v=m[0],b=m[1],I=m[2],k=m[3],l=r.match(n);for(var w=0;w<l.length;w++)c=l[w].slice(0,6),o=l[w].slice(6,9),u=l[w].slice(10,13),h='<g transform="translate('+o+","+u+')">',h+="<text ",h+='class="sym-fill" ',t.css||(h+="style=\"pointer-events:none;font-family:'SignWriting 2010 Filling';font-size:30px;fill:"+t.fill+";",h+="code"==t.view?"":"-webkit-font-feature-settings:'liga';font-feature-settings:'liga';",h+='"'),h+=">",h+="key"==t.view?c:"uni8"==t.view?this.uni8(c):"pua"==t.view?this.pua(c):this.code(c),h+="</text>",h+="<text ",h+='class="sym-line" ',t.css||(h+='style="',h+=t.view==t.copy?"":"pointer-events:none;",h+="font-family:'SignWriting 2010';font-size:30px;fill:"+t.line+";",h+="code"==t.view?"":"-webkit-font-feature-settings:'liga';font-feature-settings:'liga';",h+='"'),h+=">",h+="key"==t.view?c:"uni8"==t.view?this.uni8(c):"pua"==t.view?this.pua(c):this.code(c),h+="</text>",h+="</g>",l[w]=h;if("S"==g)if(500==v&&500==I){var y=a.split("x");b=500+parseInt(y[0]),k=500+parseInt(y[1])}else b=1e3-v,k=1e3-I;S=b-v,x=k-I,d=p[g]||0,d=75*d+v-400;var z='<svg xmlns="http://www.w3.org/2000/svg" ';return t["class"]&&(z+='class="'+t["class"]+'" '),"x"!=t.size&&(z+='width="'+S*t.size+'" height="'+x*t.size+'" '),z+='viewBox="'+v+" "+I+" "+S+" "+x+'">',t.view!=t.copy&&(z+='<text style="font-size:0%;">',z+="code"==t.copy?this.code(e):"uni8"==t.copy?this.uni8(e):"pua"==t.copy?this.pua(e):e,z+="</text>"),z+=l.join("")+"</svg>",t.laned&&(z='<div style="padding:10px;position:relative;width:'+S+"px;height:"+x+"px;left:"+d+'px;">'+z+"</div>"),z},canvas:function(e,t){var a=document.createElement("canvas"),r=this.fsw(e);if(!r){var i=this.key(e);if(!i)return"";r=6==i.length?i+"500x500":i}t||(t={}),t.size=t.size?parseFloat(t.size):1,t.line=t.line?/^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(t.line)?"#"+t.line:t.line:"black",t.fill=t.fill?/^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(t.fill)?"#"+t.fill:t.fill:"white";var s,n,f,c,l,h;s=/(A(S[123][0-9a-f]{2}[0-5][0-9a-f])+)?[BLMR]([0-9]{3}x[0-9]{3})(S[123][0-9a-f]{2}[0-5][0-9a-f][0-9]{3}x[0-9]{3})*|S38[7-9ab][0-5][0-9a-f][0-9]{3}x[0-9]{3}/g,n=/S[123][0-9a-f]{2}[0-5][0-9a-f][0-9]{3}x[0-9]{3}/g,f=/[0-9]{3}x[0-9]{3}/g,h={},h.L=-1,h.R=1;var p,o,u,g=500,S=500,x=500,d=500;u=r.charAt(0);var v=this.bbox(r);if(v=v.split(" "),g=v[0],S=v[1],x=v[2],d=v[3],"S"==u)if(500==g&&500==x){var b=this.size(r.slice(0,6)).split("x");S=500+parseInt(b[0]),d=500+parseInt(b[1])}else S=1e3-g,d=1e3-x;a.width=(S-g)*t.size,a.height=(d-x)*t.size;var I=a.getContext("2d");l=r.match(n);for(var k=0;k<l.length;k++)c=l[k].slice(0,6),p=l[k].slice(6,9),o=l[k].slice(10,13),I.font=30*t.size+"px 'SignWriting 2010 Filling'",I.fillStyle=t.fill,I.fillText(this.code(c),(p-g)*t.size,(o-x)*t.size),I.font=30*t.size+"px 'SignWriting 2010'",I.fillStyle=t.line,I.fillText(this.code(c),(p-g)*t.size,(o-x)*t.size);return a},png:function(e,t){if(this.fsw(e)||this.key(e)){var a=this.canvas(e,t),r=a.toDataURL("image/png");return a.remove(),r}return""},query:function(e){var e=e.match(/Q((A(S[123][0-9a-f]{2}[0-5u][0-9a-fu]|R[123][0-9a-f]{2}t[123][0-9a-f]{2})+)?T)?((R[123][0-9a-f]{2}t[123][0-9a-f]{2}([0-9]{3}x[0-9]{3})?)|(S[123][0-9a-f]{2}[0-5u][0-9a-fu]([0-9]{3}x[0-9]{3})?))*(V[0-9]+)?/);return e?e[0]:""},range:function(e,t,a){var r,i,s,n,f,c,l;if(a||(a=""),e=("000"+e).slice(-3),t=""+t,r="",e===t)return e;if(i=[],(e[0]!=t[0]||e[1]!=t[1])&&"0"!=e[2])if(r=e[0]+e[1],a){switch(e[2]){case"f":r+="f";break;case"e":r+="[ef]";break;case"d":case"c":case"b":case"a":r+="["+e[2]+"-f]";break;default:switch(e[2]){case"9":r+="[9a-f]";break;case"8":r+="[89a-f]";break;default:r+="["+e[2]+"-9a-f]"}}s=15-parseInt(e[2],16)+1,e=""+(parseInt(e,16)+s).toString(16),i.push(r)}else{switch(e[2]){case"9":r+="9";break;case"8":r+="[89]";break;default:r+="["+e[2]+"-9]"}s=9-e[2]+1,e=""+(1*e+s),i.push(r)}if(r="",e[0]!=t[0]&&"0"!=e[1])if(a){switch(r=e[0],e[1]){case"f":r+="f";break;case"e":r+="[ef]";break;case"d":case"c":case"b":case"a":r+="["+e[1]+"-f]";break;case"9":r+="[9a-f]";break;case"8":r+="[89a-f]";break;default:r+="["+e[1]+"-9a-f]"}r+="[0-9a-f]",s=15-parseInt(e[1],16)+1,e=""+(parseInt(e,16)+16*s).toString(16),i.push(r)}else{switch(r=e[0],s=9-e[1]+1,e[1]){case"9":r+="9";break;case"8":r+="[89]";break;default:r+="["+e[1]+"-9]"}r+="[0-9]",s=9-e[1]+1,e=""+(1*e+10*s),i.push(r)}if(r="",e[0]!=t[0])if(a){switch(s=parseInt(t[0],16)-parseInt(e[0],16),n=(parseInt(e[0],16)+s-1).toString(16),s){case 1:r=e[0];break;case 2:r="["+e[0]+n+"]";break;default:switch(c=parseInt(e[0],16)>9?"h":"d",l=parseInt(n,16)>9?"h":"d",c+l){case"dd":r+="["+e[0]+"-"+n+"]";break;case"dh":switch(s=9-e[0]){case 0:r+="[9";break;case 1:r+="[89";break;default:r+="["+e[0]+"-9"}switch(n[0]){case"a":r+="a]";break;case"b":r+="ab]";break;default:r+="a-"+n+"]"}break;case"hh":r+="["+e[0]+"-"+n+"]"}}r+="[0-9a-f][0-9a-f]",s=parseInt(t[0],16)-parseInt(e[0],16),e=""+(parseInt(e,16)+256*s).toString(16),i.push(r)}else{switch(s=t[0]-e[0],n=1*e[0]+s-1,s){case 1:r=e[0];break;case 2:r="["+e[0]+n+"]";break;default:r="["+e[0]+"-"+n+"]"}r+="[0-9][0-9]",e=""+(1*e+100*s),i.push(r)}if(r="",e[1]!=t[1])if(a){switch(s=parseInt(t[1],16)-parseInt(e[1],16),n=(parseInt(e[1],16)+s-1).toString(16),r=e[0],s){case 1:r+=e[1];break;case 2:r+="["+e[1]+n+"]";break;default:switch(c=parseInt(e[1],16)>9?"h":"d",l=parseInt(n,16)>9?"h":"d",c+l){case"dd":r+="["+e[1],s>1&&(r+="-"),r+=n+"]";break;case"dh":switch(s=9-e[1]){case 0:r+="[9";break;case 1:r+="[89";break;default:r+="["+e[1]+"-9"}switch(t[1]){case"a":r+="]";break;case"b":r+="a]";break;default:r+="a-"+(parseInt(t[1],16)-1).toString(16)+"]"}break;case"hh":r+="["+e[1],s>1&&(r+="-"),r+=(parseInt(t[1],16)-1).toString(16)+"]"}}r+="[0-9a-f]",s=parseInt(t[1],16)-parseInt(e[1],16),e=""+(parseInt(e,16)+16*s).toString(16),i.push(r)}else{switch(s=t[1]-e[1],n=1*e[1]+s-1,r=e[0],s){case 1:r+=e[1];break;case 2:r+="["+e[1]+n+"]";break;default:r+="["+e[1]+"-"+n+"]"}r+="[0-9]",e=""+(1*e+10*s),i.push(r)}if(r="",e[2]!=t[2])if(a){switch(r=e[0]+e[1],s=parseInt(t[2],16)-parseInt(e[2],16),c=parseInt(e[2],16)>9?"h":"d",l=parseInt(t[2],16)>9?"h":"d",c+l){case"dd":r+="["+e[2],s>1&&(r+="-"),r+=t[2]+"]";break;case"dh":switch(s=9-e[2]){case 0:r+="[9";break;case 1:r+="[89";break;default:r+="["+e[2]+"-9"}switch(t[2]){case"a":r+="a]";break;case"b":r+="ab]";break;default:r+="a-"+t[2]+"]"}break;case"hh":r+="["+e[2],s>1&&(r+="-"),r+=t[2]+"]"}s=parseInt(t[2],16)-parseInt(e[2],16),e=""+(parseInt(e,16)+s).toString(16),i.push(r)}else{switch(s=t[2]-e[2],r=e[0]+e[1],s){case 0:r+=e[2];break;case 1:r+="["+e[2]+t[2]+"]";break;default:r+="["+e[2]+"-"+t[2]+"]"}e=""+(1*e+s),i.push(r)}return r="","0"==e[2]&&"0"==t[2]&&(r=t,i.push(r)),r="",f=i.length,1==f?r=i[0]:(r=i.join(")|("),r="(("+r+"))"),r},regex:function(e,t){if(e=this.query(e),!e)return"";var a,r,i,s,n,f,c,l,h,p,o;t||(t=20);var u,g="S[123][0-9a-f]{2}[0-5][0-9a-f]",S="[0-9]{3}x[0-9]{3}",x="[BLMR]("+S+")("+g+S+")*",d="(A("+g+")+)",v="R[123][0-9a-f]{2}t[123][0-9a-f]{2}",b="S[123][0-9a-f]{2}[0-5u][0-9a-fu]",I="([0-9]{3}x[0-9]{3})?",k="(V[0-9]+)";if(e=this.query(e),!e)return"";if("Q"==e)return[d+"?"+x];if("QT"==e)return[d+x];var m=[],w=e.indexOf("T")+1;if(w){u="(A";var y=e.slice(0,w);if(e=e.replace(y,""),"QT"==y)u+="("+g+")+)";else{var z=y.match(RegExp("("+b+"|"+v+")","g"));if(z){for(var C=0;C<z.length;C++){var R=z[C].match(RegExp(b));R?(f=R[0].slice(0,4),p=R[0].slice(4,5),f+="u"==p?"[0-5]":p,o=R[0].slice(5,6),f+="u"==o?"[0-9a-f]":o,u+=f):(i=z[C].slice(1,4),s=z[C].slice(5,8),n=this.range(i,s,"hex"),f="S"+n+"[0-5][0-9a-f]",u+=f)}u+="("+g+")*)"}}}var z=e.match(RegExp(k,"g"));z&&(t=1*z.toString().slice(1)),a=b+I;var z=e.match(RegExp(a,"g"));if(z)for(var C=0;C<z.length;C++)r=z[C].toString(),h=r.slice(1,4),f="S"+h,p=r.slice(4,5),f+="u"==p?"[0-5]":p,o=r.slice(5,6),f+="u"==o?"[0-9a-f]":o,r.length>6?(c=1*r.slice(6,9),l=1*r.slice(10,13),f+=this.range(c-t,c+t),f+="x",f+=this.range(l-t,l+t)):f+=S,f=x+f+"("+g+S+")*",f=w?u+f:d+"?"+f,m.push(f);a=v+I;var z=e.match(RegExp(a,"g"));if(z)for(var C=0;C<z.length;C++)r=z[C].toString(),i=r.slice(1,4),s=r.slice(5,8),n=this.range(i,s,"hex"),f="S"+n+"[0-5][0-9a-f]",r.length>8?(c=1*r.slice(8,11),l=1*r.slice(12,15),f+=this.range(c-t,c+t),f+="x",f+=this.range(l-t,l+t)):f+=S,f=x+f+"("+g+S+")*",f=w?u+f:d+"?"+f,m.push(f);return m.length||m.push(u+x),m},results:function(e,t,a){if(!t)return[];(-1==="BLMR".indexOf(a)||a.length>1)&&(a="");var r,i,s,n,f=this.regex(e);if(!f)return[];for(var c=0;c<f.length;c++)r=f[c],i=t.match(RegExp(r,"g")),t=i?i.join(" "):"";return t?(a&&(t=t.replace(/B/g,a),t=t.replace(/L/g,a),t=t.replace(/M/g,a),t=t.replace(/R/g,a)),s=t.split(" "),n=s.filter(function(e){return e in this?!1:this[e]=!0},{})):n=[],n},lines:function(e,t,a){if(!t)return[];(-1==="BLMR".indexOf(a)||a.length>1)&&(a="");var r,i,s,n,f=this.regex(e);if(!f)return[];for(var c=0;c<f.length;c++)r=f[c],r="^"+r+".*",i=t.match(RegExp(r,"mg")),t=i?i.join("\n"):"";return t?(a&&(t=t.replace(/B/g,a),t=t.replace(/L/g,a),t=t.replace(/M/g,a),t=t.replace(/R/g,a)),s=t.split("\n"),n=s.filter(function(e){return e in this?!1:this[e]=!0},{})):n=[],n},convert:function(e,t){var a="";if(this.fsw(e)&&/^[eg]?([EG]L?)?$/.test(t)){var r,i,s="S[123][0-9a-f]{2}",n=s+"[0-5][0-9a-f]",f="[0-9]{3}x[0-9]{3}";if((t.indexOf("e")>-1||t.indexOf("g")>-1)&&(r=e.match(RegExp("A("+n+")*","g"))))if(i=r[0],t.indexOf("e")>-1)a+=i+"T";else{r=i.match(RegExp(s,"g")),a+="A";for(var c=0;c<r.length;c++)a+=r[c]+"uu";a+="T"}if((t.indexOf("E")>-1||t.indexOf("G")>-1)&&(r=e.match(RegExp(n+f,"g"))))for(var c=0;c<r.length;c++)a+=t.indexOf("E")>-1?r[c].slice(0,6):r[c].slice(0,4)+"uu",t.indexOf("L")>-1&&(a+=r[c].slice(6,13))}return a?"Q"+a:""}};

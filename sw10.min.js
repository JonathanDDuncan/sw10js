/**
* SignWriting 2010 JavaScript Library v1.9.1
* https://github.com/Slevinski/sw10js
* Copyright (c) 2007-2016, Stephen E Slevinski Jr
* sw10.min.js is released under the MIT License.
*/
var sw10={key:function(e,a){var t=e.match(/S[123][0-9a-f]{2}[0-5][0-9a-f]([0-9]{3}x[0-9]{3})?/g);return t?t[0]+(a?sw10.styling(e):""):""},fsw:function(e,a){var t=e.match(/(A(S[123][0-9a-f]{2}[0-5][0-9a-f])+)?[BLMR]([0-9]{3}x[0-9]{3})(S[123][0-9a-f]{2}[0-5][0-9a-f][0-9]{3}x[0-9]{3})*|S38[7-9ab][0-5][0-9a-f][0-9]{3}x[0-9]{3}/);return t?t[0]+(a?sw10.styling(e):""):""},styling:function(e){var a=e.match(/-C?(P[0-9]{2})?(G_([0-9a-fA-F]{3}([0-9a-fA-F]{3})?|[a-zA-Z]+)_)?(D_([0-9a-fA-F]{3}([0-9a-fA-F]{3})?|[a-zA-Z]+)(,([0-9a-fA-F]{3}([0-9a-fA-F]{3})?|[a-zA-Z]+))?_)?(Z([0-9]+(\.[0-9]+)?|x))?(-(D[0-9]{2}_([0-9a-fA-F]{3}([0-9a-fA-F]{3})?|[a-zA-Z]+)(,([0-9a-fA-F]{3}([0-9a-fA-F]{3})?|[a-zA-Z]+))?_)*(Z[0-9]{2},[0-9]+(\.[0-9]+)?(,[0-9]{3}x[0-9]{3})?)*)?/);return a?a[0]:""},mirror:function(e){if(e=sw10.key(e),!sw10.size(e))return"";var a,t=e.slice(0,4),r=e.slice(4,5),s=parseInt(e.slice(5,6),16),n=t+"08",i=t+"18";for(sw10.size(n)||sw10.size(i)?a=8:((0===s||4==s)&&(a=0),(1==s||5==s)&&(a=6),(2==s||6==s)&&(a=4),(3==s||7==s)&&(a=2)),e="";!sw10.size(e);)s+=a,s>7&&8>a&&(s-=8),s>15&&(s-=16),e=t+r+s.toString(16);return e},fill:function(e,a){if(e=sw10.key(e),!sw10.size(e))return"";-1!=a&&(a=1);var t=e.slice(0,4),r=parseInt(e.slice(4,5)),s=e.slice(5,6);for(e="";!sw10.size(e);)r+=a,r>5&&(r=0),0>r&&(r=5),e=t+r+s;return e},rotate:function(e,a){if(e=sw10.key(e),!sw10.size(e))return"";-1!=a&&(a=1);var t=e.slice(0,4),r=e.slice(4,5),s=parseInt(e.slice(5,6),16);for(e="";!sw10.size(e);)s>7?(s+=a,s>15&&(s=8),8>s&&(s=15),e=t+r+s.toString(16)):(s-=a,s>7&&(s=0),0>s&&(s=7),e=t+r+s);return e},scroll:function(e,a){if(e=sw10.key(e),!sw10.size(e))return"";-1!=a&&(a=1);var t=parseInt(e.slice(1,4),16)+a,r=e.slice(4,5),s=e.slice(5,6),n="S"+t.toString(16)+r+s;return sw10.size(n)?n:e},structure:function(e,a,t){var r={kind:["S100","S37f","S387"],category:["S100","S205","S2f7","S2ff","S36d","S37f","S387"],group:["S100","S10e","S11e","S144","S14c","S186","S1a4","S1ba","S1cd","S1f5","S205","S216","S22a","S255","S265","S288","S2a6","S2b7","S2d5","S2e3","S2f7","S2ff","S30a","S32a","S33b","S359","S36d","S376","S37f","S387"]},s=r[e];if(!s)return a?"is"==t?!1:"":[];if(!a&&!t)return s;t||(t="");var n;switch(t){case"is":return-1==s.indexOf(a.slice(0,4))?!1:!0;case"first":return s[0];case"last":return s.slice(-1)[0];case"prev":n=-2;break;case"":n=-1;break;case"next":n=0;break;default:return""}var i,f=s.length;for(i=0;i<s.length;i+=1)if(parseInt(a.slice(1,4),16)<parseInt(s[i].slice(1,4),16)){f=i;break}return f+=n,f=0>f?0:f>=s.length?s.length-1:f,s[f]},type:function(e){var a,t;switch(e){case"writing":a="100",t="37e";break;case"hand":a="100",t="204";break;case"movement":a="205",t="2f6";break;case"dynamic":a="2f7",t="2fe";break;case"head":case"hcenter":a="2ff",t="36c";break;case"vcenter":a="2ff",t="375";break;case"trunk":a="36d",t="375";break;case"limb":a="376",t="37e";break;case"location":a="37f",t="386";break;case"punctuation":a="387",t="38b";break;default:a="100",t="38b"}return[a,t]},is:function(e,a){if(6==e.length&&!sw10.size(e))return!1;var t=sw10.type(a),r=t[0],s=t[1],n=e.slice(1,4);return parseInt(r,16)<=parseInt(n,16)&&parseInt(s,16)>=parseInt(n,16)},filter:function(e,a){var t=sw10.type(a),r=t[0],s=t[1],n="S"+sw10.range(r,s,1)+"[0-5][0-9a-f][0-9]{3}x[0-9]{3}",i=e.match(new RegExp(n,"g"));return i?i.join(""):""},random:function(e){var a=sw10.type(e),t=a[0],r=a[1],s=Math.floor(Math.random()*(parseInt(r,16)-parseInt(t,16)+1)+parseInt(t,16)),n=Math.floor(6*Math.random()),i=Math.floor(16*Math.random()),f="S"+s.toString(16)+n.toString(16)+i.toString(16);return sw10.size(f)?f:sw10.random(e)},colorize:function(e){var a="000000";return sw10.is(e,"hand")&&(a="0000CC"),sw10.is(e,"movement")&&(a="CC0000"),sw10.is(e,"dynamic")&&(a="FF0099"),sw10.is(e,"head")&&(a="006600"),sw10.is(e,"location")&&(a="884411"),sw10.is(e,"punctuation")&&(a="FF9900"),a},view:function(e,a){if(!sw10.is(e))return"";var t=e.slice(0,4);return a?t+(sw10.size(t+"00")?"0":"1")+"0":t+(sw10.is(t,"hand")&&!sw10.structure("group",t,"is")?"1":"0")+"0"},code:function(e,a){var t,r,s=sw10.fsw(e);if(s){var n="S[123][0-9a-f]{2}[0-5][0-9a-f]",i=s.match(new RegExp(n,"g"));for(r=0;r<i.length;r+=1)t=i[r],s=s.replace(t,sw10.code(t,a));return s}if(t=sw10.key(e),!t)return"";var f=1048576+96*(parseInt(t.slice(1,4),16)-256)+16*parseInt(t.slice(4,5),16)+parseInt(t.slice(5,6),16)+1;return a?f.toString(16).toUpperCase():String.fromCharCode(55296+(f-65536>>10),56320+(f-65536&1023))},uni10:function(e,a){var t,r,s=sw10.fsw(e);if(s){var n="S[123][0-9a-f]{2}[0-5][0-9a-f]",i=s.match(new RegExp(n,"g"));for(r=0;r<i.length;r+=1)t=i[r],s=s.replace(t,sw10.uni10(t,a));return s}if(t=sw10.key(e),!t)return"";var f=262144+96*(parseInt(t.slice(1,4),16)-256)+16*parseInt(t.slice(4,5),16)+parseInt(t.slice(5,6),16)+1;return a?f.toString(16).toUpperCase():String.fromCharCode(55296+(f-65536>>10),56320+(f-65536&1023))},uni8:function(e,a){var t,r,s=sw10.fsw(e);if(s){var n="S[123][0-9a-f]{2}[0-5][0-9a-f]",i=s.match(new RegExp(n,"g"));for(r=0;r<i.length;r+=1)t=i[r],s=s.replace(t,sw10.uni8(t,a));return s}if(t=sw10.key(e),!t)return"";var f=parseInt(t.substr(1,3),16)+parseInt("1D700",16),c=a?f.toString(16).toUpperCase():String.fromCharCode(55296+(f-65536>>10),56320+(f-65536&1023)),l=t.substr(4,1);"0"!=l&&(l=parseInt(l,16)+parseInt("1DA9A",16),c+=a?l.toString(16).toUpperCase():String.fromCharCode(55296+(l-65536>>10),56320+(l-65536&1023)));var p=t.substr(5,1);return"0"!=p&&(p=parseInt(p,16)+parseInt("1DAA0",16),c+=a?p.toString(16).toUpperCase():String.fromCharCode(55296+(p-65536>>10),56320+(p-65536&1023))),c},pua:function(e,a){var t,r,s=sw10.fsw(e);if(s){var n,i,f;i=parseInt("FD800",16),s=s.replace("A",a?i.toString(16).toUpperCase():String.fromCharCode(55296+(i-65536>>10),56320+(i-65536&1023))),s=s.replace("B",a?(i+1).toString(16).toUpperCase():String.fromCharCode(55296+(i+1-65536>>10),56320+(i+1-65536&1023))),s=s.replace("L",a?(i+2).toString(16).toUpperCase():String.fromCharCode(55296+(i+2-65536>>10),56320+(i+2-65536&1023))),s=s.replace("M",a?(i+3).toString(16).toUpperCase():String.fromCharCode(55296+(i+3-65536>>10),56320+(i+3-65536&1023))),s=s.replace("R",a?(i+4).toString(16).toUpperCase():String.fromCharCode(55296+(i+4-65536>>10),56320+(i+4-65536&1023)));var c,l="[0-9]{3}x[0-9]{3}",p=s.match(new RegExp(l,"g"));for(c=0;c<p.length;c+=1)n=p[c],f=n.split("x"),f[0]=parseInt(f[0])+parseInt("FDD0C",16),f[1]=parseInt(f[1])+parseInt("FDD0C",16),r=a?f[0].toString(16).toUpperCase():String.fromCharCode(55296+(f[0]-65536>>10),56320+(f[0]-65536&1023)),r+=a?f[1].toString(16).toUpperCase():String.fromCharCode(55296+(f[1]-65536>>10),56320+(f[1]-65536&1023)),s=s.replace(n,r);for(l="S[123][0-9a-f]{2}[0-5][0-9a-f]",p=s.match(new RegExp(l,"g")),c=0;c<p.length;c+=1)t=p[c],s=s.replace(t,sw10.pua(t,a));return s}if(t=sw10.key(e),!t)return"";var o=parseInt(t.substr(1,3),16)+parseInt("FD730",16);r=a?o.toString(16).toUpperCase():String.fromCharCode(55296+(o-65536>>10),56320+(o-65536&1023));var g=t.substr(4,1);g=parseInt(g,16)+parseInt("FD810",16),r+=a?g.toString(16).toUpperCase():String.fromCharCode(55296+(g-65536>>10),56320+(g-65536&1023));var u=t.substr(5,1);return u=parseInt(u,16)+parseInt("FD820",16),r+=a?u.toString(16).toUpperCase():String.fromCharCode(55296+(u-65536>>10),56320+(u-65536&1023))},bbox:function(e){var a,t,r,s,n,i,f=/[0-9]{3}x[0-9]{3}/g,c=e.match(f);if(c){var l;for(l=0;l<c.length;l+=1)a=parseInt(c[l].slice(0,3)),t=parseInt(c[l].slice(4,7)),0===l?(r=a,s=a,n=t,i=t):(r=Math.min(r,a),s=Math.max(s,a),n=Math.min(n,t),i=Math.max(i,t));return r==s&&n==i&&(s=1e3-r,i=1e3-n),""+r+" "+s+" "+n+" "+i}return""},displace:function(e,a,t){var r,s,n="[0-9]{3}x[0-9]{3}",i=e.match(new RegExp(n,"g"));if(i){var f;for(f=0;f<i.length;f+=1)r=parseInt(i[f].slice(0,3))+a,s=parseInt(i[f].slice(4,7))+t,e=e.replace(i[f],r+"X"+s);e=e.replace(/X/g,"x")}return e},sizes:{},size:function(e){var a,t,r,s,n=sw10.fsw(e);if(n){var i=sw10.bbox(n);i=i.split(" ");var f=i[0],c=i[1],l=i[2],p=i[3];return s=c-f+"x"+(p-l),"0x0"==s?"":s}var o=sw10.key(e);if(!o)return"";if(sw10.sizes[o])return sw10.sizes[o];var g,u,h=2,w=76*h;sw10.canvaser||(sw10.canvaser=document.createElement("canvas"),sw10.canvaser.width=w,sw10.canvaser.height=w);var S=sw10.canvaser,d=S.getContext("2d");d.clearRect(0,0,w,w),d.font=30*h+"px 'SignWriting 2010'",d.fillText(sw10.code(o),0,0),g=d.getImageData(0,0,w,w).data;e:for(a=w-1;a>=0;a--)for(t=0;w>t;t+=1)for(r=0;4>r;r+=1)if(u=4*a+4*t*w+r,g[u])break e;var x=a;e:for(t=w-1;t>=0;t--)for(a=0;x>a;a+=1)for(r=0;4>r;r+=1)if(u=4*a+4*t*w+r,g[u])break e;var b=t+1;if(x=""+Math.ceil(x/h),b=""+Math.ceil(b/h),"S1710d S1711d S1712d S17311 S17321 S17733 S1773f S17743 S1774f S17753 S1775f S16d33 S1713d S1714d S17301 S17329 S1715d".indexOf(o)>-1&&(x="20"),"S24c15 S24c30".indexOf(o)>-1&&(x="22"),"S2903b".indexOf(o)>-1&&(x="23"),"S1d203 S1d233".indexOf(o)>-1&&(x="25"),"S24c15".indexOf(o)>-1&&(x="28"),"S2e629".indexOf(o)>-1&&(x="29"),"S16541 S23425".indexOf(o)>-1&&(x="30"),"S2d316".indexOf(o)>-1&&(x="40"),"S2541a".indexOf(o)>-1&&(x="50"),"S1732f S17731 S17741 S17751".indexOf(o)>-1&&(b="20"),"S1412c".indexOf(o)>-1&&(b="21"),"S2a903".indexOf(o)>-1&&(b="31"),"S2b002".indexOf(o)>-1&&(b="36"),s=x+"x"+b,"0x0"==s){var I="S1000815x30 S1000921x30 S1000a30x15 S1000b30x21 S1000c15x30 S1000d21x30 ",v=I.indexOf(o);if(-1==v)s="";else{var m=I.indexOf(" ",v);s=I.slice(v+6,m)}}else sw10.sizes[o]=s;return s},max:function(e,a){var t=sw10.type(a),r=t[0],s=t[1],n="S"+sw10.range(r,s,1)+"[0-5][0-9a-f][0-9]{3}x[0-9]{3}",i=e.match(new RegExp(n,"g"));if(i){var f,c,l,p,o,g="";for(o=0;o<i.length;o+=1)f=i[o].slice(0,6),c=parseInt(i[o].slice(6,9)),l=parseInt(i[o].slice(10,13)),p=sw10.size(f).split("x"),g+=f+c+"x"+l+(c+parseInt(p[0]))+"x"+(l+parseInt(p[1]));return g}return""},norm:function(e){var a,t,r,s,n=sw10.bbox(sw10.max(e,"hcenter")),i=sw10.bbox(sw10.max(e,"vcenter")),f=sw10.bbox(sw10.max(e));if(!f)return"";i?(a=parseInt(i.slice(0,3)),t=parseInt(i.slice(4,7))):(a=parseInt(f.slice(0,3)),t=parseInt(f.slice(4,7))),n?(r=parseInt(n.slice(8,11)),s=parseInt(n.slice(12,15))):(r=parseInt(f.slice(8,11)),s=parseInt(f.slice(12,15)));var c=parseInt((a+t)/2),l=parseInt((r+s)/2),p=500-c,o=500-l,g=e.match(/(A(S[123][0-9a-f]{2}[0-5][0-9a-f])+)?[BLMR]/);return g=g?g[0]:"M",e=g+parseInt(f.slice(4,7))+"x"+parseInt(f.slice(12,15))+sw10.filter(e),sw10.displace(e,p,o)},svg:function(e,a){var t,r,s,n,i,f,c=sw10.fsw(e),l=sw10.styling(e);if(!c){var p=sw10.key(e);if(s=sw10.size(p),!s)return"";c=6==p.length?p+"500x500":p}if(a||(a={}),a.size?a.size=parseFloat(a.size)||"x":a.size=1,a.colorize?a.colorize=!0:a.colorize=!1,a.pad?a.pad=parseInt(a.pad):a.pad=0,a.line?a.line=/^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(a.line)?"#"+a.line:a.line:a.line="black",a.fill?a.fill=/^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(a.fill)?"#"+a.fill:a.fill:a.fill="white",a.back?a.back=/^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(a.back)?"#"+a.back:a.back:a.back="",a.E=[],a.F=[],a.view="key"==a.view?"key":"uni8"==a.view?"uni8":"pua"==a.view?"pua":"uni10"==a.view?"uni10":"code",a.copy="code"==a.copy?"code":"uni8"==a.copy?"uni8":"pua"==a.copy?"pua":"uni10"==a.copy?"uni10":"key",l){var o;if(o=l.match(/C/),a.colorize=o?!0:!1,o=l.match(/P[0-9]{2}/),o&&(a.pad=parseInt(o[0].substring(1,o[0].length))),o=l.match(/G_([0-9a-fA-F]{3}([0-9a-fA-F]{3})?|[a-zA-Z]+)_/)){var g=o[0].substring(2,o[0].length-1);a.back=/^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(g)?"#"+g:g}if(t=l.split("-"),o=t[1].match(/D_([0-9a-f]{3}([0-9a-f]{3})?|[a-zA-Z]+)(,([0-9a-f]{3}([0-9a-f]{3})?|[a-zA-Z]+))?_/),o&&(n=o[0].substring(2,o[0].length-1).split(","),n[0]&&(a.line=/^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(n[0])?"#"+n[0]:n[0]),n[1]&&(a.fill=/^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(n[1])?"#"+n[1]:n[1])),o=t[1].match(/Z([0-9]+(\.[0-9]+)?|x)/),o&&(a.size=parseFloat(o[0].substring(1,o[0].length))||"x"),t[2]||(t[2]=""),o=t[2].match(/D[0-9]{2}_([0-9a-f]{3}([0-9a-f]{3})?|[a-wyzA-Z]+)(,([0-9a-f]{3}([0-9a-f]{3})?|[a-wyzA-Z]+))?_/g))for(i=0;i<o.length;i+=1)r=parseInt(o[i].substring(1,3)),n=o[i].substring(4,o[i].length-1).split(","),n[0]&&(n[0]=/^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(n[0])?"#"+n[0]:n[0]),n[1]&&(n[1]=/^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(n[1])?"#"+n[1]:n[1]),a.E[r]=n;if(o=t[2].match(/Z[0-9]{2},[0-9]+(\.[0-9]+)?(,[0-9]{3}x[0-9]{3})?/g))for(i=0;i<o.length;i+=1)r=parseInt(o[i].substring(1,3)),f=o[i].substring(4,o[i].length).split(","),f[0]=parseFloat(f[0]),a.F[r]=f}var u,h,w,S=/S[123][0-9a-f]{2}[0-5][0-9a-f][0-9]{3}x[0-9]{3}/g,d={};d.L=-1,d.R=1;var x,b,I,v,m,k,F=500,z=500,A=500,y=500;I=c.charAt(0);var C=sw10.bbox(c);C=C.split(" "),F=parseInt(C[0]),z=parseInt(C[1]),A=parseInt(C[2]),y=parseInt(C[3]),"S"==I&&(500==F&&500==A?(f=s.split("x"),z=500+parseInt(f[0]),y=500+parseInt(f[1])):(z=1e3-F,y=1e3-A)),h=c.match(S),h||(h=[]);var E;for(i=0;i<h.length;i+=1)u=h[i].slice(0,6),x=h[i].slice(6,9),b=h[i].slice(10,13),a.F[i+1]&&(a.F[i+1][1]&&(x=parseInt(x)+parseInt(a.F[i+1][1].slice(0,3))-500,b=parseInt(b)+parseInt(a.F[i+1][1].slice(4,7))-500,F=Math.min(F,x),A=Math.min(A,b)),E=sw10.size(u),E&&(E=E.split("x"),z=Math.max(z,parseInt(x)+a.F[i+1][0]*parseInt(E[0])),y=Math.max(y,parseInt(b)+a.F[i+1][0]*parseInt(E[1])))),w='<g transform="translate('+x+","+b+')">',w+="<text ",w+='class="sym-fill" ',a.css||(w+="style=\"pointer-events:none;font-family:'SignWriting 2010 Filling';font-size:"+(a.F[i+1]?30*a.F[i+1][0]:30)+"px;fill:"+(a.E[i+1]&&a.E[i+1][1]?a.E[i+1][1]:a.fill)+";",w+="code"==a.view?"":"-webkit-font-feature-settings:'liga';font-feature-settings:'liga';",w+='"'),w+=">",w+="key"==a.view?u:"uni8"==a.view?sw10.uni8(u):"pua"==a.view?sw10.pua(u):"uni10"==a.view?sw10.uni10(u):sw10.code(u),w+="</text>",w+="<text ",w+='class="sym-line" ',a.css||(w+='style="',w+=a.view==a.copy?"":"pointer-events:none;",w+="font-family:'SignWriting 2010';font-size:"+(a.F[i+1]?30*a.F[i+1][0]:30)+"px;fill:"+(a.E[i+1]?a.E[i+1][0]:a.colorize?"#"+sw10.colorize(u):a.line)+";",w+="code"==a.view?"":"-webkit-font-feature-settings:'liga';font-feature-settings:'liga';",w+='"'),w+=">",w+="key"==a.view?u:"uni8"==a.view?sw10.uni8(u):"pua"==a.view?sw10.pua(u):"uni10"==a.view?sw10.uni10(u):sw10.code(u),w+="</text>",w+="</g>",h[i]=w;F-=a.pad,z+=a.pad,A-=a.pad,y+=a.pad,v=z-F,m=y-A,k=d[I]||0,k=75*k+F-400;var R='<svg xmlns="http://www.w3.org/2000/svg" ';return a["class"]&&(R+='class="'+a["class"]+'" '),"x"!=a.size&&(R+='width="'+v*a.size+'" height="'+m*a.size+'" '),R+='viewBox="'+F+" "+A+" "+v+" "+m+'">',a.view!=a.copy&&(R+='<text style="font-size:0%;">',R+="code"==a.copy?sw10.code(e):"uni8"==a.copy?sw10.uni8(e):"pua"==a.copy?sw10.pua(e):"uni10"==a.copy?sw10.uni10(e):e,R+="</text>"),a.back&&(R+='  <rect x="'+F+'" y="'+A+'" width="'+v+'" height="'+m+'" style="fill:'+a.back+';" />'),R+=h.join("")+"</svg>",a.laned&&(R='<div style="padding:10px;position:relative;width:'+v+"px;height:"+m+"px;left:"+k+'px;">'+R+"</div>"),R},canvas:function(e,a){var t,r,s,n,i,f,c,l=document.createElement("canvas"),p=sw10.fsw(e,!0),o=sw10.styling(e);if(!p){var g=sw10.key(e);if(s=sw10.size(g),!g)return"";p=6==g.length?g+"500x500":g}if(a||(a={}),a.size?a.size=parseFloat(a.size):a.size=1,a.colorize?a.colorize=!0:a.colorize=!1,a.pad?a.pad=parseInt(a.pad):a.pad=0,a.line?a.line=/^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(a.line)?"#"+a.line:a.line:a.line="black",a.fill?a.fill=/^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(a.fill)?"#"+a.fill:a.fill:a.fill="white",a.back?a.back=/^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(a.back)?"#"+a.back:a.back:a.back="",a.E=[],a.F=[],o){var u;if(u=o.match(/C/),a.colorize=u?!0:!1,u=o.match(/P[0-9]{2}/),u&&(a.pad=parseInt(u[0].substring(1,u[0].length))),u=o.match(/G_([0-9a-fA-F]{3}([0-9a-fA-F]{3})?|[a-zA-Z]+)_/)){var h=u[0].substring(2,u[0].length-1);a.back=/^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(h)?"#"+h:h}if(t=o.split("-"),u=t[1].match(/D_([0-9a-f]{3}([0-9a-f]{3})?|[a-zA-Z]+)(,([0-9a-f]{3}([0-9a-f]{3})?|[a-zA-Z]+))?_/),u&&(r=u[0].substring(2,u[0].length-1).split(","),r[0]&&(a.line=/^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(r[0])?"#"+r[0]:r[0]),r[1]&&(a.fill=/^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(r[1])?"#"+r[1]:r[1])),u=t[1].match(/Z[0-9]+(\.[0-9]+)?/),u&&(a.size=u[0].substring(1,u[0].length)),t[2]||(t[2]=""),u=t[2].match(/D[0-9]{2}_([0-9a-f]{3}([0-9a-f]{3})?|[a-wyzA-Z]+)(,([0-9a-f]{3}([0-9a-f]{3})?|[a-wyzA-Z]+))?_/g))for(f=0;f<u.length;f+=1)c=parseInt(u[f].substring(1,3)),r=u[f].substring(4,u[f].length-1).split(","),r[0]&&(r[0]=/^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(r[0])?"#"+r[0]:r[0]),r[1]&&(r[1]=/^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(r[1])?"#"+r[1]:r[1]),a.E[c]=r;if(u=t[2].match(/Z[0-9]{2},[0-9]+(\.[0-9]+)?(,[0-9]{3}x[0-9]{3})?/g))for(f=0;f<u.length;f+=1)c=parseInt(u[f].substring(1,3)),i=u[f].substring(4,u[f].length).split(","),i[0]=parseFloat(i[0]),a.F[c]=i}var w,S,d=/S[123][0-9a-f]{2}[0-5][0-9a-f][0-9]{3}x[0-9]{3}/g,x={};x.L=-1,x.R=1;var b,I,v,m,k,F=500,z=500,A=500,y=500;v=p.charAt(0);var C=sw10.bbox(p);for(C=C.split(" "),F=parseInt(C[0]),z=parseInt(C[1]),A=parseInt(C[2]),y=parseInt(C[3]),"S"==v&&(500==F&&500==A?(i=s.split("x"),z=500+parseInt(i[0]),y=500+parseInt(i[1])):(z=1e3-F,y=1e3-A)),S=p.match(d),f=0;f<S.length;f+=1)w=S[f].slice(0,6),b=S[f].slice(6,9),I=S[f].slice(10,13),a.F[f+1]&&(a.F[f+1][1]&&(b=parseInt(b)+parseInt(a.F[f+1][1].slice(0,3))-500,I=parseInt(I)+parseInt(a.F[f+1][1].slice(4,7))-500,F=Math.min(F,b),A=Math.min(A,I)),n=sw10.size(w),n&&(n=n.split("x"),z=Math.max(z,parseInt(b)+a.F[f+1][0]*parseInt(n[0])),y=Math.max(y,parseInt(I)+a.F[f+1][0]*parseInt(n[1]))));F-=a.pad,z+=a.pad,A-=a.pad,y+=a.pad,m=(z-F)*a.size,k=(y-A)*a.size,l.width=m,l.height=k;var E=l.getContext("2d");for(a.back&&(E.rect(0,0,m,k),E.fillStyle=a.back,E.fill()),S=p.match(d),f=0;f<S.length;f+=1)w=S[f].slice(0,6),b=S[f].slice(6,9),I=S[f].slice(10,13),a.F[f+1]&&(a.F[f+1][1]&&(b=parseInt(b)+parseInt(a.F[f+1][1].slice(0,3))-500,I=parseInt(I)+parseInt(a.F[f+1][1].slice(4,7))-500,F=Math.min(F,b),A=Math.min(A,I)),n=sw10.size(w),n&&(n=n.split("x"),z=Math.max(z,parseInt(b)+a.F[f+1][0]*parseInt(n[0])),y=Math.max(y,parseInt(I)+a.F[f+1][0]*parseInt(n[1])))),E.font=(a.F[f+1]?30*a.size*a.F[f+1][0]:30*a.size)+"px 'SignWriting 2010 Filling'",E.fillStyle=a.E[f+1]&&a.E[f+1][1]?a.E[f+1][1]:a.fill,E.fillText(sw10.code(w),(b-F)*a.size,(I-A)*a.size),E.font=(a.F[f+1]?30*a.size*a.F[f+1][0]:30*a.size)+"px 'SignWriting 2010'",E.fillStyle=a.E[f+1]?a.E[f+1][0]:a.colorize?"#"+sw10.colorize(w):a.line,E.fillText(sw10.code(w),(b-F)*a.size,(I-A)*a.size);return l},png:function(e,a){if(sw10.fsw(e,!0)||sw10.key(e,!0)){var t=sw10.canvas(e,a),r=t.toDataURL("image/png");return t.remove(),r}return""},query:function(e){return e=e.match(/Q((A(S[123][0-9a-f]{2}[0-5u][0-9a-fu]|R[123][0-9a-f]{2}t[123][0-9a-f]{2})+)?T)?((R[123][0-9a-f]{2}t[123][0-9a-f]{2}([0-9]{3}x[0-9]{3})?)|(S[123][0-9a-f]{2}[0-5u][0-9a-fu]([0-9]{3}x[0-9]{3})?))*(V[0-9]+)?/),e?e[0]:""},range:function(e,a,t){var r,s,n,i,f,c,l;if(t||(t=""),e=("000"+e).slice(-3),a=""+a,r="",e===a)return e;if(s=[],(e[0]!=a[0]||e[1]!=a[1])&&"0"!=e[2])if(r=e[0]+e[1],t){switch(e[2]){case"f":r+="f";break;case"e":r+="[ef]";break;case"d":case"c":case"b":case"a":r+="["+e[2]+"-f]";break;default:switch(e[2]){case"9":r+="[9a-f]";break;case"8":r+="[89a-f]";break;default:r+="["+e[2]+"-9a-f]"}}n=15-parseInt(e[2],16)+1,e=""+(parseInt(e,16)+n).toString(16),s.push(r)}else{switch(e[2]){case"9":r+="9";break;case"8":r+="[89]";break;default:r+="["+e[2]+"-9]"}n=9-e[2]+1,e=""+(1*e+n),s.push(r)}if(r="",e[0]!=a[0]&&"0"!=e[1])if(t){switch(r=e[0],e[1]){case"f":r+="f";break;case"e":r+="[ef]";break;case"d":case"c":case"b":case"a":r+="["+e[1]+"-f]";break;case"9":r+="[9a-f]";break;case"8":r+="[89a-f]";break;default:r+="["+e[1]+"-9a-f]"}r+="[0-9a-f]",n=15-parseInt(e[1],16)+1,e=""+(parseInt(e,16)+16*n).toString(16),s.push(r)}else{switch(r=e[0],n=9-e[1]+1,e[1]){case"9":r+="9";break;case"8":r+="[89]";break;default:r+="["+e[1]+"-9]"}r+="[0-9]",n=9-e[1]+1,e=""+(1*e+10*n),s.push(r)}if(r="",e[0]!=a[0])if(t){switch(n=parseInt(a[0],16)-parseInt(e[0],16),i=(parseInt(e[0],16)+n-1).toString(16),n){case 1:r=e[0];break;case 2:r="["+e[0]+i+"]";break;default:switch(c=parseInt(e[0],16)>9?"h":"d",l=parseInt(i,16)>9?"h":"d",c+l){case"dd":r+="["+e[0]+"-"+i+"]";break;case"dh":switch(n=9-e[0]){case 0:r+="[9";break;case 1:r+="[89";break;default:r+="["+e[0]+"-9"}switch(i[0]){case"a":r+="a]";break;case"b":r+="ab]";break;default:r+="a-"+i+"]"}break;case"hh":r+="["+e[0]+"-"+i+"]"}}r+="[0-9a-f][0-9a-f]",n=parseInt(a[0],16)-parseInt(e[0],16),e=""+(parseInt(e,16)+256*n).toString(16),s.push(r)}else{switch(n=a[0]-e[0],i=1*e[0]+n-1,n){case 1:r=e[0];break;case 2:r="["+e[0]+i+"]";break;default:r="["+e[0]+"-"+i+"]"}r+="[0-9][0-9]",e=""+(1*e+100*n),s.push(r)}if(r="",e[1]!=a[1])if(t){switch(n=parseInt(a[1],16)-parseInt(e[1],16),i=(parseInt(e[1],16)+n-1).toString(16),r=e[0],n){case 1:r+=e[1];break;case 2:r+="["+e[1]+i+"]";break;default:switch(c=parseInt(e[1],16)>9?"h":"d",l=parseInt(i,16)>9?"h":"d",c+l){case"dd":r+="["+e[1],n>1&&(r+="-"),r+=i+"]";break;case"dh":switch(n=9-e[1]){case 0:r+="[9";break;case 1:r+="[89";break;default:r+="["+e[1]+"-9"}switch(a[1]){case"a":r+="]";break;case"b":r+="a]";break;default:r+="a-"+(parseInt(a[1],16)-1).toString(16)+"]"}break;case"hh":r+="["+e[1],n>1&&(r+="-"),r+=(parseInt(a[1],16)-1).toString(16)+"]"}}r+="[0-9a-f]",n=parseInt(a[1],16)-parseInt(e[1],16),e=""+(parseInt(e,16)+16*n).toString(16),s.push(r)}else{switch(n=a[1]-e[1],i=1*e[1]+n-1,r=e[0],n){case 1:r+=e[1];break;case 2:r+="["+e[1]+i+"]";break;default:r+="["+e[1]+"-"+i+"]"}r+="[0-9]",e=""+(1*e+10*n),s.push(r)}if(r="",e[2]!=a[2])if(t){switch(r=e[0]+e[1],n=parseInt(a[2],16)-parseInt(e[2],16),c=parseInt(e[2],16)>9?"h":"d",l=parseInt(a[2],16)>9?"h":"d",c+l){case"dd":r+="["+e[2],n>1&&(r+="-"),r+=a[2]+"]";break;case"dh":switch(n=9-e[2]){case 0:r+="[9";break;case 1:r+="[89";break;default:r+="["+e[2]+"-9"}switch(a[2]){case"a":r+="a]";break;case"b":r+="ab]";break;default:r+="a-"+a[2]+"]"}break;case"hh":r+="["+e[2],n>1&&(r+="-"),r+=a[2]+"]"}n=parseInt(a[2],16)-parseInt(e[2],16),e=""+(parseInt(e,16)+n).toString(16),s.push(r)}else{switch(n=a[2]-e[2],r=e[0]+e[1],n){case 0:r+=e[2];break;case 1:r+="["+e[2]+a[2]+"]";break;default:r+="["+e[2]+"-"+a[2]+"]"}e=""+(1*e+n),s.push(r)}return r="","0"==e[2]&&"0"==a[2]&&(r=a,s.push(r)),r="",f=s.length,1==f?r=s[0]:(r=s.join(")|("),r="(("+r+"))"),r},regex:function(e,a){if(e=sw10.query(e),!e)return"";var t,r,s,n,i,f,c,l,p,o,g,u,h;a||(a=20);var w,S="S[123][0-9a-f]{2}[0-5][0-9a-f]",d="[0-9]{3}x[0-9]{3}",x="[BLMR]("+d+")("+S+d+")*",b="(A("+S+")+)",I="R[123][0-9a-f]{2}t[123][0-9a-f]{2}",v="S[123][0-9a-f]{2}[0-5u][0-9a-fu]",m="([0-9]{3}x[0-9]{3})?",k="(V[0-9]+)";if(e=sw10.query(e),!e)return"";if("Q"==e)return[b+"?"+x];if("QT"==e)return[b+x];var F=[],z=e.indexOf("T")+1;if(z){w="(A";var A=e.slice(0,z);if(e=e.replace(A,""),"QT"==A)w+="("+S+")+)";else if(t=A.match(new RegExp("("+v+"|"+I+")","g"))){var y;for(r=0;r<t.length;r+=1)y=t[r].match(new RegExp(v)),y?(l=y[0].slice(0,4),u=y[0].slice(4,5),l+="u"==u?"[0-5]":u,h=y[0].slice(5,6),l+="u"==h?"[0-9a-f]":h,w+=l):(i=t[r].slice(1,4),f=t[r].slice(5,8),c=sw10.range(i,f,"hex"),l="S"+c+"[0-5][0-9a-f]",w+=l);w+="("+S+")*)"}}if(t=e.match(new RegExp(k,"g")),t&&(a=1*t.toString().slice(1)),s=v+m,t=e.match(new RegExp(s,"g")))for(r=0;r<t.length;r+=1)n=t[r].toString(),g=n.slice(1,4),l="S"+g,u=n.slice(4,5),l+="u"==u?"[0-5]":u,h=n.slice(5,6),l+="u"==h?"[0-9a-f]":h,n.length>6?(p=1*n.slice(6,9),o=1*n.slice(10,13),l+=sw10.range(p-a,p+a),l+="x",l+=sw10.range(o-a,o+a)):l+=d,l=x+l+"("+S+d+")*",l=z?w+l:b+"?"+l,F.push(l);if(s=I+m,t=e.match(new RegExp(s,"g")))for(r=0;r<t.length;r+=1)n=t[r].toString(),i=n.slice(1,4),f=n.slice(5,8),c=sw10.range(i,f,"hex"),l="S"+c+"[0-5][0-9a-f]",n.length>8?(p=1*n.slice(8,11),o=1*n.slice(12,15),l+=sw10.range(p-a,p+a),l+="x",l+=sw10.range(o-a,o+a)):l+=d,l=x+l+"("+S+d+")*",l=z?w+l:b+"?"+l,F.push(l);return F.length||F.push(w+x),F},results:function(e,a,t){if(!a)return[];(-1==="BLMR".indexOf(t)||t.length>1)&&(t="");var r,s,n,i,f=sw10.regex(e);if(!f)return[];var c;for(c=0;c<f.length;c+=1)r=f[c],s=a.match(new RegExp(r,"g")),a=s?s.join(" "):"";return a?(t&&(a=a.replace(/B/g,t),a=a.replace(/L/g,t),a=a.replace(/M/g,t),a=a.replace(/R/g,t)),n=a.split(" "),i=n.filter(function(e){return e in n?!1:n[e]=!0},{})):i=[],i},lines:function(e,a,t){if(!a)return[];(-1==="BLMR".indexOf(t)||t.length>1)&&(t="");var r,s,n,i,f=sw10.regex(e);if(!f)return[];var c;for(c=0;c<f.length;c+=1)r=f[c],r="^"+r+".*",s=a.match(new RegExp(r,"mg")),a=s?s.join("\n"):"";return a?(t&&(a=a.replace(/B/g,t),a=a.replace(/L/g,t),a=a.replace(/M/g,t),a=a.replace(/R/g,t)),n=a.split("\n"),i=n.filter(function(e){return e in n?!1:n[e]=!0},{})):i=[],i},convert:function(e,a){var t,r="";if(sw10.fsw(e)&&/^[Aa]?([Ss]L?)?$/.test(a)){var s,n,i="S[123][0-9a-f]{2}",f=i+"[0-5][0-9a-f]",c="[0-9]{3}x[0-9]{3}";if((a.indexOf("A")>-1||a.indexOf("a")>-1)&&(s=e.match(new RegExp("A("+f+")*","g"))))if(n=s[0],a.indexOf("A")>-1)r+=n+"T";else{for(s=n.match(new RegExp(i,"g")),r+="A",t=0;t<s.length;t+=1)r+=s[t]+"uu";r+="T"}if((a.indexOf("S")>-1||a.indexOf("s")>-1)&&(s=e.match(new RegExp(f+c,"g"))))for(t=0;t<s.length;t+=1)r+=a.indexOf("S")>-1?s[t].slice(0,6):s[t].slice(0,4)+"uu",a.indexOf("L")>-1&&(r+=s[t].slice(6,13))}return r?"Q"+r:""},signtext:function(e){var a=sw10.regex("Q");a=a[0],a="("+a+"|S3[0-9a-f]{2}[0-5][0-9a-f]([0-9]{3}x[0-9]{3}))";var t=e.match(new RegExp(a,"mg"));return t?t:[]}};

/**
* SignWriting 2010 JavaScript Library v1.6.1
* https://github.com/Slevinski/sw10js
* Copyright (c) 2007-2015, Stephen E Slevinski Jr
* sw10.js is released under the MIT License.
* modified and compiled with Closure Compiler by Jonathan Duncan
*/
sw10 = signwriting_2010 = function () { function e(e, r) { if (e = t(e), !e) return ""; var i, n, s; r || (r = 20); var f; if (e = t(e), !e) return ""; if ("Q" === e) return ["(A(S[123][0-9a-f]{2}[0-5][0-9a-f])+)?[BLMR]([0-9]{3}x[0-9]{3})(S[123][0-9a-f]{2}[0-5][0-9a-f][0-9]{3}x[0-9]{3})*"]; if ("QT" === e) return ["(A(S[123][0-9a-f]{2}[0-5][0-9a-f])+)[BLMR]([0-9]{3}x[0-9]{3})(S[123][0-9a-f]{2}[0-5][0-9a-f][0-9]{3}x[0-9]{3})*"]; var c = [], l = e.indexOf("T") + 1; if (l) if (f = "(A", i = e.slice(0, l), e = e.replace(i, ""), "QT" === i) f += "(S[123][0-9a-f]{2}[0-5][0-9a-f])+)"; else if (i = i.match(RegExp("(S[123][0-9a-f]{2}[0-5u][0-9a-fu]|R[123][0-9a-f]{2}t[123][0-9a-f]{2})", "g"))) { var o; for (o = 0; o < i.length; o++) { var p = i[o].match(/S[123][0-9a-f]{2}[0-5u][0-9a-fu]/); p ? (n = p[0].slice(0, 4), s = p[0].slice(4, 5), n = "u" === s ? n + "[0-5]" : n + s, s = p[0].slice(5, 6), n = "u" === s ? n + "[0-9a-f]" : n + s) : (n = i[o].slice(1, 4), s = i[o].slice(5, 8), n = a(n, s, "hex"), n = "S" + n + "[0-5][0-9a-f]"), f += n } f += "(S[123][0-9a-f]{2}[0-5][0-9a-f])*)" } if ((i = e.match(RegExp("(V[0-9]+)", "g"))) && (r = 1 * i.toString().slice(1)), o = e.match(new RegExp("S[123][0-9a-f]{2}[0-5u][0-9a-fu]([0-9]{3}x[0-9]{3})?", "g"))) for (p = 0; p < o.length; p++) i = o[p].toString(), n = i.slice(1, 4), n = "S" + n, s = i.slice(4, 5), n = "u" === s ? n + "[0-5]" : n + s, s = i.slice(5, 6), n = "u" === s ? n + "[0-9a-f]" : n + s, 6 < i.length ? (s = 1 * i.slice(6, 9), i = 1 * i.slice(10, 13), n += a(s - r, s + r), n += "x", n += a(i - r, i + r)) : n += "[0-9]{3}x[0-9]{3}", n = "[BLMR]([0-9]{3}x[0-9]{3})(S[123][0-9a-f]{2}[0-5][0-9a-f][0-9]{3}x[0-9]{3})*" + n + "(S[123][0-9a-f]{2}[0-5][0-9a-f][0-9]{3}x[0-9]{3})*", n = l ? f + n : "(A(S[123][0-9a-f]{2}[0-5][0-9a-f])+)?" + n, c.push(n); if (o = e.match(new RegExp("R[123][0-9a-f]{2}t[123][0-9a-f]{2}([0-9]{3}x[0-9]{3})?", "g"))) for (p = 0; p < o.length; p++) i = o[p].toString(), n = i.slice(1, 4), s = i.slice(5, 8), n = a(n, s, "hex"), n = "S" + n + "[0-5][0-9a-f]", 8 < i.length ? (s = 1 * i.slice(8, 11), i = 1 * i.slice(12, 15), n += a(s - r, s + r), n += "x", n += a(i - r, i + r)) : n += "[0-9]{3}x[0-9]{3}", n = "[BLMR]([0-9]{3}x[0-9]{3})(S[123][0-9a-f]{2}[0-5][0-9a-f][0-9]{3}x[0-9]{3})*" + n + "(S[123][0-9a-f]{2}[0-5][0-9a-f][0-9]{3}x[0-9]{3})*", n = l ? f + n : "(A(S[123][0-9a-f]{2}[0-5][0-9a-f])+)?" + n, c.push(n); return c.length || c.push(f + "[BLMR]([0-9]{3}x[0-9]{3})(S[123][0-9a-f]{2}[0-5][0-9a-f][0-9]{3}x[0-9]{3})*"), c } function a(e, a, t) { var r, i, n, s, f, c; if (t || (t = ""), e = ("000" + e).slice(-3), a = "" + a, e === a) return e; if (i = [], (e[0] !== a[0] || e[1] !== a[1]) && "0" != e[2]) { if (r = e[0] + e[1], t) { switch (e[2]) { case "f": r += "f"; break; case "e": r += "[ef]"; break; case "d": case "c": case "b": case "a": r += "[" + e[2] + "-f]"; break; default: switch (e[2]) { case "9": r += "[9a-f]"; break; case "8": r += "[89a-f]"; break; default: r += "[" + e[2] + "-9a-f]" } } n = 15 - parseInt(e[2], 16) + 1, e = "" + (parseInt(e, 16) + n).toString(16) } else { switch (e[2]) { case "9": r += "9"; break; case "8": r += "[89]"; break; default: r += "[" + e[2] + "-9]" } n = 9 - e[2] + 1, e = "" + (1 * e + n) } i.push(r) } if (e[0] != a[0] && "0" != e[1]) { if (t) { switch (r = e[0], e[1]) { case "f": r += "f"; break; case "e": r += "[ef]"; break; case "d": case "c": case "b": case "a": r += "[" + e[1] + "-f]"; break; case "9": r += "[9a-f]"; break; case "8": r += "[89a-f]"; break; default: r += "[" + e[1] + "-9a-f]" } r += "[0-9a-f]", n = 15 - parseInt(e[1], 16) + 1, e = "" + (parseInt(e, 16) + 16 * n).toString(16) } else { switch (r = e[0], e[1]) { case "9": r += "9"; break; case "8": r += "[89]"; break; default: r += "[" + e[1] + "-9]" } r += "[0-9]", n = 9 - e[1] + 1, e = "" + (1 * e + 10 * n) } i.push(r) } if (r = "", e[0] != a[0]) { if (t) { switch (n = parseInt(a[0], 16) - parseInt(e[0], 16), s = (parseInt(e[0], 16) + n - 1).toString(16), n) { case 1: r = e[0]; break; case 2: r = "[" + e[0] + s + "]"; break; default: switch (f = 9 < parseInt(e[0], 16) ? "h" : "d", c = 9 < parseInt(s, 16) ? "h" : "d", f + c) { case "dd": r += "[" + e[0] + "-" + s + "]"; break; case "dh": switch (n = 9 - e[0]) { case 0: r += "[9"; break; case 1: r += "[89"; break; default: r += "[" + e[0] + "-9" } switch (s[0]) { case "a": r += "a]"; break; case "b": r += "ab]"; break; default: r += "a-" + s + "]" } break; case "hh": r += "[" + e[0] + "-" + s + "]" } } r += "[0-9a-f][0-9a-f]", n = parseInt(a[0], 16) - parseInt(e[0], 16), e = "" + (parseInt(e, 16) + 256 * n).toString(16) } else { switch (n = a[0] - e[0], s = 1 * e[0] + n - 1, n) { case 1: r = e[0]; break; case 2: r = "[" + e[0] + s + "]"; break; default: r = "[" + e[0] + "-" + s + "]" } r += "[0-9][0-9]", e = "" + (1 * e + 100 * n) } i.push(r) } if (e[1] != a[1]) { if (t) { switch (n = parseInt(a[1], 16) - parseInt(e[1], 16), s = (parseInt(e[1], 16) + n - 1).toString(16), r = e[0], n) { case 1: r += e[1]; break; case 2: r += "[" + e[1] + s + "]"; break; default: switch (f = 9 < parseInt(e[1], 16) ? "h" : "d", c = 9 < parseInt(s, 16) ? "h" : "d", f + c) { case "dd": r += "[" + e[1], n > 1 && (r += "-"), r += s + "]"; break; case "dh": switch (n = 9 - e[1]) { case 0: r += "[9"; break; case 1: r += "[89"; break; default: r += "[" + e[1] + "-9" } switch (a[1]) { case "a": r += "]"; break; case "b": r += "a]"; break; default: r += "a-" + (parseInt(a[1], 16) - 1).toString(16) + "]" } break; case "hh": r += "[" + e[1], n > 1 && (r += "-"), r += (parseInt(a[1], 16) - 1).toString(16) + "]" } } r += "[0-9a-f]", n = parseInt(a[1], 16) - parseInt(e[1], 16), e = "" + (parseInt(e, 16) + 16 * n).toString(16) } else { switch (n = a[1] - e[1], s = 1 * e[1] + n - 1, r = e[0], n) { case 1: r += e[1]; break; case 2: r += "[" + e[1] + s + "]"; break; default: r += "[" + e[1] + "-" + s + "]" } r += "[0-9]", e = "" + (1 * e + 10 * n) } i.push(r) } if (e[2] != a[2]) { if (t) { switch (r = e[0] + e[1], n = parseInt(a[2], 16) - parseInt(e[2], 16), f = 9 < parseInt(e[2], 16) ? "h" : "d", c = 9 < parseInt(a[2], 16) ? "h" : "d", f + c) { case "dd": r += "[" + e[2], n > 1 && (r += "-"), r += a[2] + "]"; break; case "dh": switch (n = 9 - e[2]) { case 0: r += "[9"; break; case 1: r += "[89"; break; default: r += "[" + e[2] + "-9" } switch (a[2]) { case "a": r += "a]"; break; case "b": r += "ab]"; break; default: r += "a-" + a[2] + "]" } break; case "hh": r += "[" + e[2], n > 1 && (r += "-"), r += a[2] + "]" } n = parseInt(a[2], 16) - parseInt(e[2], 16), e = "" + (parseInt(e, 16) + n).toString(16) } else { switch (n = a[2] - e[2], r = e[0] + e[1], n) { case 0: r += e[2]; break; case 1: r += "[" + e[2] + a[2] + "]"; break; default: r += "[" + e[2] + "-" + a[2] + "]" } e = "" + (1 * e + n) } i.push(r) } return "0" === e[2] && "0" === a[2] && i.push(a), 1 === i.length ? r = i[0] : (r = i.join(")|("), r = "((" + r + "))"), r } function t(e) { return (e = e.match(/Q((A(S[123][0-9a-f]{2}[0-5u][0-9a-fu]|R[123][0-9a-f]{2}t[123][0-9a-f]{2})+)?T)?((R[123][0-9a-f]{2}t[123][0-9a-f]{2}([0-9]{3}x[0-9]{3})?)|(S[123][0-9a-f]{2}[0-5u][0-9a-fu]([0-9]{3}x[0-9]{3})?))*(V[0-9]+)?/)) ? e[0] : "" } function r(e, a) { var t, r = document.createElement("canvas"), i = x(e, !0), s = v(e); if (!i) { if (i = b(e), t = n(i), !i) return ""; i = 6 === i.length ? i + "500x500" : i } if (a || (a = {}), a.size = a.size ? parseFloat(a.size) : 1, a.f = a.f ? !0 : !1, a.b = a.b ? parseInt(a.b, void 0) : 0, a.c = a.c ? /^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(a.c) ? "#" + a.c : a.c : "black", a.fill = a.fill ? /^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(a.fill) ? "#" + a.fill : a.fill : "white", a.back = a.back ? /^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(a.back) ? "#" + a.back : a.back : "", a.E = [], a.a = [], s) { var c; if (c = s.match(/C/), a.f = c ? !0 : !1, (c = s.match(/P[0-9]{2}/)) && (a.b = parseInt(c[0].substring(1, c[0].length), void 0)), (c = s.match(/G\(([0-9a-fA-F]{3}([0-9a-fA-F]{3})?|[a-zA-Z]+)\)/)) && (c = c[0].substring(2, c[0].length - 1), a.back = /^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(c) ? "#" + c : c), s = s.split("+"), (c = s[0].match(/D\(([0-9a-f]{3}([0-9a-f]{3})?|[a-zA-Z]+)(,([0-9a-f]{3}([0-9a-f]{3})?|[a-zA-Z]+))?\)/)) && (c = c[0].substring(2, c[0].length - 1).split(","), c[0] && (a.c = /^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(c[0]) ? "#" + c[0] : c[0]), c[1] && (a.fill = /^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(c[1]) ? "#" + c[1] : c[1])), (c = s[0].match(/Z[0-9]+(\.[0-9]+)?/)) && (a.size = c[0].substring(1, c[0].length)), s[1] || (s[1] = ""), c = s[1].match(/D[0-9]{2}\(([0-9a-f]{3}([0-9a-f]{3})?|[a-wyzA-Z]+)(,([0-9a-f]{3}([0-9a-f]{3})?|[a-wyzA-Z]+))?\)/g)) { var l; for (l = 0; l < c.length; l++) { var g = parseInt(c[l].substring(1, 3), void 0), h = c[l].substring(4, c[l].length - 1).split(","); h[0] && (h[0] = /^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(h[0]) ? "#" + h[0] : h[0]), h[1] && (h[1] = /^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(h[1]) ? "#" + h[1] : h[1]), a.E[g] = h } } if (c = s[1].match(/Z[0-9]{2},[0-9]+(\.[0-9]+)?(,[0-9]{3}x[0-9]{3})?/g)) for (s = 0; s < c.length; s++) l = parseInt(c[s].substring(1, 3), void 0), g = c[s].substring(4, c[s].length).split(","), g[0] = parseFloat(g[0]), a.a[l] = g } var u, d, S, g = /S[123][0-9a-f]{2}[0-5][0-9a-f][0-9]{3}x[0-9]{3}/g, s = c = 500, h = l = 500; d = i.charAt(0), h = f(i), h = h.split(" "), c = parseInt(h[0], void 0), s = parseInt(h[1], void 0), l = parseInt(h[2], void 0), h = parseInt(h[3], void 0), "S" === d && (500 === c && 500 === l ? (t = t.split("x"), s = 500 + parseInt(t[0], void 0), h = 500 + parseInt(t[1], void 0)) : (s = 1e3 - c, h = 1e3 - l)), t = i.match(g); var I; for (I = 0; I < t.length; I++) u = t[I].slice(0, 6), d = t[I].slice(6, 9), S = t[I].slice(10, 13), a.a[I + 1] && (a.a[I + 1][1] && (d = parseInt(d, void 0) + parseInt(a.a[I + 1][1].slice(0, 3), void 0) - 500, S = parseInt(S, void 0) + parseInt(a.a[I + 1][1].slice(4, 7), void 0) - 500, c = Math.min(c, d), l = Math.min(l, S)), u = n(u)) && (u = u.split("x"), s = Math.max(s, parseInt(d, void 0) + a.a[I + 1][0] * parseInt(u[0], void 0)), h = Math.max(h, parseInt(S, void 0) + a.a[I + 1][0] * parseInt(u[1], void 0))); for (c -= a.b, s += a.b, l -= a.b, h += a.b, t = (s - c) * a.size, d = (h - l) * a.size, r.width = t, r.height = d, I = r.getContext("2d"), a.back && (I.rect(0, 0, t, d), I.fillStyle = a.back, I.fill()), t = i.match(g), i = 0; i < t.length; i++) u = t[i].slice(0, 6), d = t[i].slice(6, 9), S = t[i].slice(10, 13), a.a[i + 1] && (a.a[i + 1][1] && (d = parseInt(d, void 0) + parseInt(a.a[i + 1][1].slice(0, 3), void 0) - 500, S = parseInt(S, void 0) + parseInt(a.a[i + 1][1].slice(4, 7), void 0) - 500, c = Math.min(c, d), l = Math.min(l, S)), g = n(u)) && (g = g.split("x"), s = Math.max(s, parseInt(d, void 0) + a.a[i + 1][0] * parseInt(g[0], void 0)), h = Math.max(h, parseInt(S, void 0) + a.a[i + 1][0] * parseInt(g[1], void 0))), I.font = (a.a[i + 1] ? 30 * a.size * a.a[i + 1][0] : 30 * a.size) + "px 'SignWriting 2010 Filling'", I.fillStyle = a.E[i + 1] && a.E[i + 1][1] ? a.E[i + 1][1] : a.fill, I.fillText(o(u), (d - c) * a.size, (S - l) * a.size), I.font = (a.a[i + 1] ? 30 * a.size * a.a[i + 1][0] : 30 * a.size) + "px 'SignWriting 2010'", I.fillStyle = a.E[i + 1] ? a.E[i + 1][0] : a.f ? "#" + p(u) : a.c, I.fillText(o(u), (d - c) * a.size, (S - l) * a.size); return r } function i(e, t) { var r = d(t), r = "S" + a(r[0], r[1], "1") + "[0-5][0-9a-f][0-9]{3}x[0-9]{3}"; if (r = e.match(new RegExp(r, "g"))) { var i, s, f, c, l, o = ""; for (l = 0; l < r.length; l++) i = r[l].slice(0, 6), s = parseInt(r[l].slice(6, 9), void 0), f = parseInt(r[l].slice(10, 13), void 0), c = n(i).split("x"), o += i + s + "x" + f + (s + parseInt(c[0], void 0)) + "x" + (f + parseInt(c[1], void 0)); return o } return "" } function n(e) { var a, t = x(e); if (t) return e = f(t), e = e.split(" "), a = e[1] - e[0] + "x" + (e[3] - e[2]), "0x0" === a ? "" : a; if (e = b(e), !e) return ""; if (I[e]) return I[e]; a || (a = document.createElement("canvas"), a.width = 152, a.height = 152), a = a.getContext("2d"), a.clearRect(0, 0, 152, 152), a.font = "60px 'SignWriting 2010'", a.fillText(o(e), 0, 0), a = a.getImageData(0, 0, 152, 152).data; var r; r = 151; e: for (; r >= 0; r--) for (var i = 0; 152 > i; i++) for (var n = 0; 4 > n; n++) if (t = 4 * r + 608 * i + n, a[t]) break e; i = 151; e: for (; i >= 0; i--) for (n = 0; r > n; n++) for (var s = 0; 4 > s; s++) if (t = 4 * n + 608 * i + s, a[t]) break e; if (r = "" + Math.ceil(r / 2), a = "" + Math.ceil((i + 1) / 2), -1 < "S1710d S1711d S1712d S17311 S17321 S17733 S1773f S17743 S1774f S17753 S1775f S16d33 S1713d S1714d S17301 S17329 S1715d".indexOf(e) && (r = "20"), -1 < "S24c15 S24c30".indexOf(e) && (r = "22"), -1 < "S2903b".indexOf(e) && (r = "23"), -1 < "S1d203 S1d233".indexOf(e) && (r = "25"), -1 < "S24c15".indexOf(e) && (r = "28"), -1 < "S2e629".indexOf(e) && (r = "29"), -1 < "S16541 S23425".indexOf(e) && (r = "30"), -1 < "S2d316".indexOf(e) && (r = "40"), -1 < "S2541a".indexOf(e) && (r = "50"), -1 < "S1732f S17731 S17741 S17751".indexOf(e) && (a = "20"), -1 < "S1412c".indexOf(e) && (a = "21"), -1 < "S2a903".indexOf(e) && (a = "31"), -1 < "S2b002".indexOf(e) && (a = "36"), a = r + "x" + a, "0x0" === a) { if (a = "S1000815x30 S1000921x30 S1000a30x15 S1000b30x21 S1000c15x30 S1000d21x30 ".indexOf(e), -1 === a) return ""; a = "S1000815x30 S1000921x30 S1000a30x15 S1000b30x21 S1000c15x30 S1000d21x30 ".slice(a + 6, "S1000815x30 S1000921x30 S1000a30x15 S1000b30x21 S1000c15x30 S1000d21x30 ".indexOf(" ", a)) } return I[e] = a } function s(e, a, t) { var r, i, n = e.match(RegExp("[0-9]{3}x[0-9]{3}", "g")); if (n) { var s; for (s = 0; s < n.length; s++) r = parseInt(n[s].slice(0, 3), void 0) + a, i = parseInt(n[s].slice(4, 7), void 0) + t, e = e.replace(n[s], r + "X" + i); e = e.replace(/X/g, "x") } return e } function f(e) { var a, t = Number.MAX_VALUE, r = Number.MIN_VALUE, i = Number.MAX_VALUE, n = Number.MIN_VALUE, s = e.match(/[0-9]{3}x[0-9]{3}/g); if (s) { var f; for (f = 0; f < s.length; f++) e = parseInt(s[f].slice(0, 3), void 0), a = parseInt(s[f].slice(4, 7), void 0), 0 === f ? (r = t = e, n = i = a) : (t = Math.min(t, e), r = Math.max(r, e), i = Math.min(i, a), n = Math.max(n, a)); return "" + t + " " + r + " " + i + " " + n } return "" } function c(e, a) { var t = x(e); if (t) { var r, i, n, s, t = t.replace("A", a ? 1038336..toString(16).toUpperCase() : String.fromCharCode(56246, 56320)), t = t.replace("B", a ? 1038337..toString(16).toUpperCase() : String.fromCharCode(56246, 56321)), t = t.replace("L", a ? 1038338..toString(16).toUpperCase() : String.fromCharCode(56246, 56322)), t = t.replace("M", a ? 1038339..toString(16).toUpperCase() : String.fromCharCode(56246, 56323)), t = t.replace("R", a ? 1038340..toString(16).toUpperCase() : String.fromCharCode(56246, 56324)), f = t.match(new RegExp("[0-9]{3}x[0-9]{3}", "g")); for (s = 0; s < f.length; s++) r = f[s], i = r.split("x"), i[0] = parseInt(i[0], void 0) + 1039628, i[1] = parseInt(i[1], void 0) + 1039628, n = a ? i[0].toString(16).toUpperCase() : String.fromCharCode(55296 + (i[0] - 65536 >> 10), 56320 + (i[0] - 65536 & 1023)), n += a ? i[1].toString(16).toUpperCase() : String.fromCharCode(55296 + (i[1] - 65536 >> 10), 56320 + (i[1] - 65536 & 1023)), t = t.replace(r, n); for (f = t.match(new RegExp("S[123][0-9a-f]{2}[0-5][0-9a-f]", "g")), s = 0; s < f.length; s++) r = f[s], t = t.replace(r, c(r, a)); return t } return (t = b(e)) ? (f = parseInt(t.substr(1, 3), 16) + 1038128, f = a ? f.toString(16).toUpperCase() : String.fromCharCode(55296 + (f - 65536 >> 10), 56320 + (f - 65536 & 1023)), s = t.substr(4, 1), s = parseInt(s, 16) + 1038352, f += a ? s.toString(16).toUpperCase() : String.fromCharCode(55296 + (s - 65536 >> 10), 56320 + (s - 65536 & 1023)), t = t.substr(5, 1), t = parseInt(t, 16) + 1038368, f += a ? t.toString(16).toUpperCase() : String.fromCharCode(55296 + (t - 65536 >> 10), 56320 + (t - 65536 & 1023))) : "" } function l(e, a) { var t, r = x(e); if (r) { var i, n = r.match(RegExp("S[123][0-9a-f]{2}[0-5][0-9a-f]", "g")); for (i = 0; i < n.length; i++) t = n[i], r = r.replace(t, l(t, a)); return r } return (t = b(e)) ? (r = parseInt(t.substr(1, 3), 16) + 120576, r = a ? r.toString(16).toUpperCase() : String.fromCharCode(55296 + (r - 65536 >> 10), 56320 + (r - 65536 & 1023)), n = t.substr(4, 1), "0" != n && (n = parseInt(n, 16) + 121498, r += a ? n.toString(16).toUpperCase() : String.fromCharCode(55296 + (n - 65536 >> 10), 56320 + (n - 65536 & 1023))), t = t.substr(5, 1), "0" != t && (t = parseInt(t, 16) + 121504, r += a ? t.toString(16).toUpperCase() : String.fromCharCode(55296 + (t - 65536 >> 10), 56320 + (t - 65536 & 1023))), r) : "" } function o(e, a) { var t, r = x(e); if (r) { var i, n = r.match(RegExp("S[123][0-9a-f]{2}[0-5][0-9a-f]", "g")); for (i = 0; i < n.length; i++) t = n[i], r = r.replace(t, o(t, a)); return r } return (t = b(e)) ? (t = 1048576 + 96 * (parseInt(t.slice(1, 4), 16) - 256) + 16 * parseInt(t.slice(4, 5), 16) + parseInt(t.slice(5, 6), 16) + 1, a ? t.toString(16).toUpperCase() : String.fromCharCode(55296 + (t - 65536 >> 10), 56320 + (t - 65536 & 1023))) : "" } function p(e) { var a = "000000"; return u(e, "hand") && (a = "0000CC"), u(e, "movement") && (a = "CC0000"), u(e, "dynamic") && (a = "FF0099"), u(e, "head") && (a = "006600"), u(e, "location") && (a = "884411"), u(e, "punctuation") && (a = "FF9900"), a } function g(e) { var a = d(e), t = a[0], a = a[1], t = Math.floor(Math.random() * (parseInt(a, 16) - parseInt(t, 16) + 1) + parseInt(t, 16)), a = Math.floor(6 * Math.random()), r = Math.floor(16 * Math.random()), t = "S" + t.toString(16) + a.toString(16) + r.toString(16); return n(t) ? t : g(e) } function h(e, t) { var r = d(t), r = "S" + a(r[0], r[1], "1") + "[0-5][0-9a-f][0-9]{3}x[0-9]{3}"; return (r = e.match(new RegExp(r, "g"))) ? r.join("") : "" } function u(e, a) { if (6 === e.length && !n(e)) return !1; var t = d(a), r = t[1], i = e.slice(1, 4); return parseInt(t[0], 16) <= parseInt(i, 16) && parseInt(r, 16) >= parseInt(i, 16) } function d(e) { var a; switch (e) { case "writing": e = "100", a = "37e"; break; case "hand": e = "100", a = "204"; break; case "movement": e = "205", a = "2f6"; break; case "dynamic": e = "2f7", a = "2fe"; break; case "head": case "hcenter": e = "2ff", a = "36c"; break; case "vcenter": e = "2ff", a = "375"; break; case "trunk": e = "36d", a = "375"; break; case "limb": e = "376", a = "37e"; break; case "location": e = "37f", a = "386"; break; case "punctuation": e = "387", a = "38b"; break; default: e = "100", a = "38b" } return [e, a] } function S(e, a, t) { if (e = { kind: ["S100", "S37f", "S387"], o: "S100 S205 S2f7 S2ff S36d S37f S387".split(" "), group: "S100 S10e S11e S144 S14c S186 S1a4 S1ba S1cd S1f5 S205 S216 S22a S255 S265 S288 S2a6 S2b7 S2d5 S2e3 S2f7 S2ff S30a S32a S33b S359 S36d S376 S37f S387".split(" ") }[e], !e) return a ? "is" === t ? !1 : "" : []; if (!a && !t) return e; switch (t || (t = ""), t) { case "is": return -1 === e.indexOf(a.slice(0, 4)) ? !1 : !0; case "first": return e[0]; case "last": return e.slice(-1)[0]; case "prev": t = -2; break; case "": t = -1; break; case "next": t = 0; break; default: return "" } var r, i = e.length; for (r = 0; r < e.length; r++) if (parseInt(a.slice(1, 4), 16) < parseInt(e[r].slice(1, 4), 16)) { i = r; break } return i += t, i = 0 > i ? 0 : i >= e.length ? e.length - 1 : i, e[i] } function v(e) { return (e = e.match(/-C?(P[0-9]{2})?(G\(([0-9a-fA-F]{3}([0-9a-fA-F]{3})?|[a-zA-Z]+)\))?(D\(([0-9a-fA-F]{3}([0-9a-fA-F]{3})?|[a-zA-Z]+)(,([0-9a-fA-F]{3}([0-9a-fA-F]{3})?|[a-zA-Z]+))?\))?(Z[0-9]+(\.[0-9]+)?)?(\+(D[0-9]{2}\(([0-9a-fA-F]{3}([0-9a-fA-F]{3})?|[a-zA-Z]+)(,([0-9a-fA-F]{3}([0-9a-fA-F]{3})?|[a-zA-Z]+))?\))*(Z[0-9]{2},[0-9]+(\.[0-9]+)?(,[0-9]{3}x[0-9]{3})?)*)?/)) ? e[0] : "" } function x(e, a) { var t = e.match(/(A(S[123][0-9a-f]{2}[0-5][0-9a-f])+)?[BLMR]([0-9]{3}x[0-9]{3})(S[123][0-9a-f]{2}[0-5][0-9a-f][0-9]{3}x[0-9]{3})*|S38[7-9ab][0-5][0-9a-f][0-9]{3}x[0-9]{3}/); return t ? t[0] + (a ? v(e) : "") : "" } function b(e, a) { var t = e.match(/S[123][0-9a-f]{2}[0-5][0-9a-f]([0-9]{3}x[0-9]{3})?/g); return t ? t[0] + (a ? v(e) : "") : "" } var I = {}, m = {}; return m.key = b, m.v = x, m.L = v, m.B = function (e) { if (e = b(e), !n(e)) return ""; var a = e.slice(0, 4), t = e.slice(4, 5), r = parseInt(e.slice(5, 6), 16); e = a + "18"; var i = 0; for (n(a + "08") || n(e) ? i = 8 : ((0 === r || 4 === r) && (i = 0), (1 === r || 5 === r) && (i = 6), (2 === r || 6 === r) && (i = 4), (3 === r || 7 === r) && (i = 2)), e = ""; !n(e) ;) r += i, r > 7 && 8 > i && (r -= 8), r > 15 && (r -= 16), e = a + t + r.toString(16); return e }, m.fill = function (e, a) { if (e = b(e), !n(e)) return ""; -1 != a && (a = 1); var t = e.slice(0, 4), r = parseInt(e.slice(4, 5), void 0), i = e.slice(5, 6); for (e = ""; !n(e) ;) r += a, r > 5 && (r = 0), 0 > r && (r = 5), e = t + r + i; return e }, m.rotate = function (e, a) { if (e = b(e), !n(e)) return ""; -1 != a && (a = 1); var t = e.slice(0, 4), r = e.slice(4, 5), i = parseInt(e.slice(5, 6), 16); for (e = ""; !n(e) ;) i > 7 ? (i += a, i > 15 && (i = 8), 8 > i && (i = 15), e = t + r + i.toString(16)) : (i -= a, i > 7 && (i = 0), 0 > i && (i = 7), e = t + r + i); return e }, m.scroll = function (e, a) { if (e = b(e), !n(e)) return ""; -1 != a && (a = 1); var t = "S" + (parseInt(e.slice(1, 4), 16) + a).toString(16) + e.slice(4, 5) + e.slice(5, 6); return n(t) ? t : e }, m.K = S, m.type = d, m.is = u, m.filter = h, m.random = g, m.f = p, m.view = function (e, a) { if (!u(e)) return ""; var t = e.slice(0, 4); return a ? t + (n(t + "00") ? "0" : "1") + "0" : t + (u(t, "hand") && !S("group", t, "is") ? "1" : "0") + "0" }, m.M = function (e, a) { var t, r = x(e), i = v(e); if (!r) { if (r = b(e), t = n(r), !t) return ""; r = 6 === r.length ? r + "500x500" : r } if (a || (a = {}), a.size = a.size ? parseFloat(a.size) || "x" : 1, a.f = a.f ? !0 : !1, a.b = a.b ? parseInt(a.b, void 0) : 0, a.c = a.c ? /^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(a.c) ? "#" + a.c : a.c : "black", a.fill = a.fill ? /^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(a.fill) ? "#" + a.fill : a.fill : "white", a.back = a.back ? /^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(a.back) ? "#" + a.back : a.back : "", a.E = [], a.a = [], a.view = "key" === a.view ? "key" : "uni8" === a.view ? "uni8" : "pua" === a.view ? "pua" : "code", a.g = "code" === a.g ? "code" : "uni8" === a.g ? "uni8" : "pua" === a.g ? "pua" : "key", i) { var s; if (s = i.match(/C/), a.f = s ? !0 : !1, (s = i.match(/P[0-9]{2}/)) && (a.b = parseInt(s[0].substring(1, s[0].length), void 0)), (s = i.match(/G\(([0-9a-fA-F]{3}([0-9a-fA-F]{3})?|[a-zA-Z]+)\)/)) && (s = s[0].substring(2, s[0].length - 1), a.back = /^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(s) ? "#" + s : s), i = i.split("+"), (s = i[0].match(/D\(([0-9a-f]{3}([0-9a-f]{3})?|[a-zA-Z]+)(,([0-9a-f]{3}([0-9a-f]{3})?|[a-zA-Z]+))?\)/)) && (s = s[0].substring(2, s[0].length - 1).split(","), s[0] && (a.c = /^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(s[0]) ? "#" + s[0] : s[0]), s[1] && (a.fill = /^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(s[1]) ? "#" + s[1] : s[1])), (s = i[0].match(/Z[0-9]+(\.[0-9]+)?/)) && (a.size = s[0].substring(1, s[0].length)), i[1] || (i[1] = ""), s = i[1].match(/D[0-9]{2}\(([0-9a-f]{3}([0-9a-f]{3})?|[a-wyzA-Z]+)(,([0-9a-f]{3}([0-9a-f]{3})?|[a-wyzA-Z]+))?\)/g)) { var g; for (g = 0; g < s.length; g++) { var h = parseInt(s[g].substring(1, 3), void 0), u = s[g].substring(4, s[g].length - 1).split(","); u[0] && (u[0] = /^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(u[0]) ? "#" + u[0] : u[0]), u[1] && (u[1] = /^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(u[1]) ? "#" + u[1] : u[1]), a.E[h] = u } } if (s = i[1].match(/Z[0-9]{2},[0-9]+(\.[0-9]+)?(,[0-9]{3}x[0-9]{3})?/g)) for (i = 0; i < s.length; i++) g = parseInt(s[i].substring(1, 3), void 0), h = s[i].substring(4, s[i].length).split(","), h[0] = parseFloat(h[0]), a.a[g] = h } var d, S, h = s = 500, u = i = 500; g = r.charAt(0), u = f(r), u = u.split(" "), s = parseInt(u[0], void 0), h = parseInt(u[1], void 0), i = parseInt(u[2], void 0), u = parseInt(u[3], void 0), "S" === g && (500 === s && 500 === i ? (t = t.split("x"), h = 500 + parseInt(t[0], void 0), u = 500 + parseInt(t[1], void 0)) : (h = 1e3 - s, u = 1e3 - i)); var I, r = r.match(/S[123][0-9a-f]{2}[0-5][0-9a-f][0-9]{3}x[0-9]{3}/g); for (I = 0; I < r.length; I++) { if (t = r[I].slice(0, 6), d = r[I].slice(6, 9), S = r[I].slice(10, 13), a.a[I + 1]) { a.a[I + 1][1] && (d = parseInt(d, void 0) + parseInt(a.a[I + 1][1].slice(0, 3), void 0) - 500, S = parseInt(S, void 0) + parseInt(a.a[I + 1][1].slice(4, 7), void 0) - 500, s = Math.min(s, d), i = Math.min(i, S)); var m = n(t); m && (m = m.split("x"), h = Math.max(h, parseInt(d, void 0) + a.a[I + 1][0] * parseInt(m[0], void 0)), u = Math.max(u, parseInt(S, void 0) + a.a[I + 1][0] * parseInt(m[1], void 0))) } d = '<g transform="translate(' + d + "," + S + ')">', d += "<text ", d += 'class="sym-fill" ', a.i || (d += "style=\"pointer-events:none;font-family:'SignWriting 2010 Filling';font-size:" + (a.a[I + 1] ? 30 * a.a[I + 1][0] : 30) + "px;fill:" + (a.E[I + 1] && a.E[I + 1][1] ? a.E[I + 1][1] : a.fill) + ";", d += "code" === a.view ? "" : "-webkit-font-feature-settings:'liga';font-feature-settings:'liga';", d += '"'), d += ">", d += "key" === a.view ? t : "uni8" === a.view ? l(t) : "pua" === a.view ? c(t) : o(t), d += "</text>", d += "<text ", d += 'class="sym-line" ', a.i || (d += 'style="', d += a.view === a.g ? "" : "pointer-events:none;", d += "font-family:'SignWriting 2010';font-size:" + (a.a[I + 1] ? 30 * a.a[I + 1][0] : 30) + "px;fill:" + (a.E[I + 1] ? a.E[I + 1][0] : a.f ? "#" + p(t) : a.c) + ";", d += "code" === a.view ? "" : "-webkit-font-feature-settings:'liga';font-feature-settings:'liga';", d += '"'), d += ">", d += "key" === a.view ? t : "uni8" === a.view ? l(t) : "pua" === a.view ? c(t) : o(t), d += "</text>", d += "</g>", r[I] = d } return s -= a.b, h += a.b, i -= a.b, u += a.b, t = h - s, h = u - i, g = { j: -1, l: 1 }[g] || 0, g = 75 * g + s - 400, u = '<svg xmlns="http://www.w3.org/2000/svg" ', a.h && (u += 'class="' + a.h + '" '), "x" != a.size && (u += 'width="' + t * a.size + '" height="' + h * a.size + '" '), u += 'viewBox="' + s + " " + i + " " + t + " " + h + '">', a.view != a.g && (u = u + '<text style="font-size:0%;">' + ("code" === a.g ? o(e) : "uni8" === a.g ? l(e) : "pua" === a.g ? c(e) : e), u += "</text>"), a.back && (u += '  <rect x="' + s + '" y="' + i + '" width="' + t + '" height="' + h + '" style="fill:' + a.back + ';" />'), u += r.join("") + "</svg>", a.w && (u = '<div style="padding:10px;position:relative;width:' + t + "px;height:" + h + "px;left:" + g + 'px;">' + u + "</div>"), u }, m.code = o, m.N = l, m.F = c, m.m = f, m.u = s, m.size = n, m.max = i, m.C = function (e) { var a, t, r, n; n = f(i(e, "hcenter")), r = f(i(e, "vcenter")); var c = f(i(e)); return c ? (r ? (a = parseInt(r.slice(0, 3), void 0), t = parseInt(r.slice(4, 7), void 0)) : (a = parseInt(c.slice(0, 3), void 0), t = parseInt(c.slice(4, 7), void 0)), n ? (r = parseInt(n.slice(8, 11), void 0), n = parseInt(n.slice(12, 15), void 0)) : (r = parseInt(c.slice(8, 11), void 0), n = parseInt(c.slice(12, 15), void 0)), a = 500 - parseInt((a + t) / 2, void 0), r = 500 - parseInt((r + n) / 2, void 0), t = (t = e.match(/(A(S[123][0-9a-f]{2}[0-5][0-9a-f])+)?[BLMR]/)) ? t[0] : "M", e = t + parseInt(c.slice(4, 7), void 0) + "x" + parseInt(c.slice(12, 15), void 0) + h(e), s(e, a, r)) : "" }, m.canvas = r, m.D = function (e, a) { if (x(e, !0) || b(e, !0)) { var t = r(e, a), i = t.toDataURL("image/png"); return t.remove(), i } return "" }, m.G = t, m.H = a, m.I = e, m.J = function (a, t, r) { if (!t) return []; (-1 === "BLMR".indexOf(r) || 1 < r.length) && (r = ""); var i; if (a = e(a), !a) return []; var n; for (n = 0; n < a.length; n++) i = a[n], t = (t = t.match(new RegExp(i, "g"))) ? t.join(" ") : ""; return t ? (r && (t = t.replace(/B/g, r), t = t.replace(/L/g, r), t = t.replace(/M/g, r), t = t.replace(/R/g, r)), r = t.split(" "), r = r.filter(function (e) { return e in this ? !1 : this[e] = !0 }, {})) : r = [], r }, m.A = function (a, t, r) { if (!t) return []; (-1 === "BLMR".indexOf(r) || 1 < r.length) && (r = ""); var i; if (a = e(a), !a) return []; var n; for (n = 0; n < a.length; n++) i = a[n], i = "^" + i + ".*", t = (t = t.match(new RegExp(i, "mg"))) ? t.join("\n") : ""; return t ? (r && (t = t.replace(/B/g, r), t = t.replace(/L/g, r), t = t.replace(/M/g, r), t = t.replace(/R/g, r)), r = t.split("\n"), r = r.filter(function (e) { return e in this ? !1 : this[e] = !0 }, {})) : r = [], r }, m.s = function (e, a) { var t = ""; if (x(e) && /^[eg]?([EG]L?)?$/.test(a)) { var r; if ((-1 < a.indexOf("e") || -1 < a.indexOf("g")) && (r = e.match(RegExp("A(S[123][0-9a-f]{2}[0-5][0-9a-f])*", "g")))) if (r = r[0], -1 < a.indexOf("e")) t += r + "T"; else { r = r.match(RegExp("S[123][0-9a-f]{2}", "g")); var i, t = t + "A"; for (i = 0; i < r.length; i++) t += r[i] + "uu"; t += "T" } if ((-1 < a.indexOf("E") || -1 < a.indexOf("G")) && (r = e.match(RegExp("S[123][0-9a-f]{2}[0-5][0-9a-f][0-9]{3}x[0-9]{3}", "g")))) for (i = 0; i < r.length; i++) t = -1 < a.indexOf("E") ? t + r[i].slice(0, 6) : t + (r[i].slice(0, 4) + "uu"), -1 < a.indexOf("L") && (t += r[i].slice(6, 13)) } return t ? "Q" + t : "" }, m }();